(function(){"use strict";var e={6762:function(e,t,a){a.r(t)},8515:function(e,t,a){a.r(t)},8517:function(e,t,a){a.r(t)},7093:function(e,t,a){var l=a(5130),s=a(6768),n=a(4232),o=a(657),r=a(3772);a(3110);class i{constructor(){(0,r.A)(this,"max_combo",0),(0,r.A)(this,"clear_type",0),(0,r.A)(this,"clear_type_before",0),(0,r.A)(this,"clear_updated_at","1970-01-01T09:00:00+09:00"),(0,r.A)(this,"score",0),(0,r.A)(this,"score_before",0),(0,r.A)(this,"score_updated_at","1970-01-01T09:00:00+09:00"),(0,r.A)(this,"min_bp",-1),(0,r.A)(this,"min_bp_before",-1),(0,r.A)(this,"min_bp_updated_at","1970-01-01T09:00:00+09:00"),(0,r.A)(this,"updated_at","1970-01-01T09:00:00+09:00"),(0,r.A)(this,"play_count",0)}set_score(e){this.max_combo=e.max_combo,e&&e.clear_type&&(this.clear_type=e.clear_type.current,this.clear_type_before=e.clear_type.before,this.clear_updated_at=e.clear_type.updated_at),e&&e.score&&(this.score=e.score.current,this.score_before=e.score.before,this.score_updated_at=e.score.updated_at),e&&e.min_bp&&(this.min_bp=e.min_bp.current,this.min_bp_before=e.min_bp.before,this.min_bp_updated_at=e.min_bp.updated_at),this.updated_at=e?e.updated_at:"1970-01-01T09:00:00+09:00",this.play_count=e?e.play_count:0}}class c{constructor(e,t,a){(0,r.A)(this,"scores",{}),(0,r.A)(this,"name",void 0),(0,r.A)(this,"user_id",void 0);for(const[l,s]of Object.entries(e))this.scores[l]=new i,this.scores[l].set_score(s);this.name=t,this.user_id=a}get_score(e){return this.scores[e]?this.scores[e]:new i}score_exists(e){return!!this.scores[e]}}var u=a(2408);class d{constructor(e){(0,r.A)(this,"title",void 0),(0,r.A)(this,"notes",void 0),(0,r.A)(this,"sha256",void 0),(0,r.A)(this,"md5",void 0),this.title=e.title,this.notes=e.notes,this.sha256=e.sha256,this.md5=e.md5}}class _{constructor(e){(0,r.A)(this,"songs",{});for(const t of e)this.songs[t.md5]=new d(t)}get_score(e){return this.songs[e]}}a(4114),a(8111),a(2489),a(7588),a(1701),a(9112);class v{static default(){return new v(JSON.parse("[]"))}constructor(e){(0,r.A)(this,"tables",void 0),this.tables=[],e.forEach(e=>this.tables.push(new p(e.name,e.id,e.levels,e.level_list)))}name_list(){return this.tables.map(e=>e.name)}first(){return 0===this.tables.length?null:this.tables[0]}get_id_by_name(e){for(let t=0;t<this.tables.length;t++)if(this.tables[t].name===e)return this.tables[t].id;return-1}level_list(){let e=[];for(const t of this.tables)e=e.concat(t.level_list);return e}}class p{constructor(e,t,a,l){(0,r.A)(this,"name",void 0),(0,r.A)(this,"id",void 0),(0,r.A)(this,"levels",void 0),(0,r.A)(this,"level_list",void 0),this.name=e,this.id=t,this.levels=a,this.level_list=l}}class h{constructor(){(0,r.A)(this,"inactive",{})}static initialize(e){for(const t in e.inactive)b.initialize(e.inactive[t])}static check_all(e,t){if(h.is_all_active(e,t))for(let a=0;a<t.tables.length;a++){const l=h.get(e,t.tables[a]);b.check_all(l,t.tables[a])}else h.initialize(e)}static is_all_active(e,t){for(let a=0;a<t.tables.length;a++){const l=h.get(e,t.tables[a]);if(!b.is_all_active(l))return!1}return!0}static contains_active(e,t){for(let a=0;a<t.tables.length;a++){const l=h.get(e,t.tables[a]);if(b.contains_active(l,t.tables[a]))return!0}return!1}static table_is_active(e,t){return b.contains_active(h.get(e,t),t)}static is_active(e,t,a){return b.is_active(h.get(e,t),a)}static get(e,t){return e.inactive[t.id]||(e.inactive[t.id]=new b),e.inactive[t.id]}static filter_active_tables(e,t){return t.tables.filter(t=>h.table_is_active(e,t))}}class b{constructor(){(0,r.A)(this,"inactive",[])}static initialize(e){e.inactive=[]}static checked_levels(e,t){const a=[];for(const l of t.level_list)b.is_active(e,l)||a.push(l);return a}static is_all_active(e){return 0===e.inactive.length}static is_active(e,t){return-1===e.inactive.indexOf(t)}static change_active(e,t){if(b.is_active(e,t))b.check(e,t);else{const a=e.inactive.indexOf(t);-1!==a&&e.inactive.splice(a,1)}}static contains_active(e,t){return e.inactive.length<t.level_list.length}static check_all(e,t){b.is_all_active(e)?t.level_list.forEach(t=>b.check(e,t)):b.initialize(e)}static check(e,t){e.inactive.push(t)}}class k{static format(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)}}class m{constructor(e){(0,r.A)(this,"logs",void 0),this.logs=[],e.log&&e.log.reverse().forEach(e=>this.logs.push(new f(e.play_count,e.clear_count,e.play_time,e.date,e.total_judge)))}static default(){return new m({log:[]})}}class f{constructor(e,t,a,l,s){(0,r.A)(this,"play_count",void 0),(0,r.A)(this,"clear_count",void 0),(0,r.A)(this,"play_time",void 0),(0,r.A)(this,"date",void 0),(0,r.A)(this,"total_judge",void 0),this.play_count=e,this.clear_count=t,this.play_time=a,this.date=k.format(new Date(l)),this.total_judge=new y(s)}time(){return~~(this.play_time/3600)+":"+("0"+~~(this.play_time/60%60)).slice(-2)+":"+("0"+~~(this.play_time%60)).slice(-2)}notes(){return this.total_judge.notes()}}class y{constructor(e){(0,r.A)(this,"early_pgreat",void 0),(0,r.A)(this,"late_pgreat",void 0),(0,r.A)(this,"early_great",void 0),(0,r.A)(this,"late_great",void 0),(0,r.A)(this,"early_good",void 0),(0,r.A)(this,"late_good",void 0),(0,r.A)(this,"early_bad",void 0),(0,r.A)(this,"late_bad",void 0),(0,r.A)(this,"early_poor",void 0),(0,r.A)(this,"late_poor",void 0),(0,r.A)(this,"early_miss",void 0),(0,r.A)(this,"late_miss",void 0),this.early_pgreat=e.early_pgreat,this.late_pgreat=e.late_pgreat,this.early_great=e.early_great,this.late_great=e.late_great,this.early_good=e.early_good,this.late_good=e.late_good,this.early_bad=e.early_bad,this.late_bad=e.late_bad,this.early_poor=e.early_poor,this.late_poor=e.late_poor,this.early_miss=e.early_miss,this.late_miss=e.late_miss}notes(){return this.early_pgreat+this.early_great+this.early_good+this.late_pgreat+this.late_great+this.late_good}}class g{constructor(){(0,r.A)(this,"host","https://bms.katand.net")}static async get_account(e){if(null===e)return{error:"token is not set"};const t=new g,a=t.host+"/account",l={"session-token":e,"access-control-request-headers":"session-token,content-type"},s={headers:l};return await fetch(a,s).then(t.handler).catch(t.error)}static async get_user_list(e){const t=new g,a=t.host+"/users",l={"session-token":e},s={headers:l};return await fetch(a,s).then(t.handler).catch(t.error)}static get_table_header_url(e,t){const a=new g;return a.host+"/recommend_table/"+e+"/"+t+"/table.html"}static async get_table_header(e,t){const a=new g,l=a.host+"/recommend_table/"+e+"/"+t+"/header.json",s={"access-control-request-headers":"session-token,content-type"},n={headers:s};return await fetch(l,n).then(a.handler).catch(a.error)}static async get_table(e,t){const a=new g,l=a.host+"/recommend_table/"+e+"/"+t+"/score.json",s={"access-control-request-headers":"session-token,content-type"},n={headers:s};return await fetch(l,n).then(a.handler).catch(a.error)}static async fetch_score(e,t,a,l){const s=new g,n=s.host+"/detail/?since="+e.toISOString()+"&until="+t.toISOString()+"&user_id="+a,o={"session-token":l},r={headers:o};try{const e=await fetch(n,r).then(s.handler).catch(s.error);return e.error?(u.debug(e),null):new c(e.score,e.user_name,e.user_id)}catch(i){return u.error(i),null}}static async fetch_score_log(e,t,a){const l=new g,s=l.host+"/score/?user_id="+e+"&sha256="+t,n={"session-token":a},o={headers:n};return await fetch(s,o).then(l.handler).catch(l.error)}static async fetch_my_score(e,t){const a=new g,l=a.host+"/score/my?sha256="+e,s={"session-token":t},n={headers:s};return await fetch(l,n).then(a.handler).catch(a.error)}static async fetch_ranking(e,t){const a=new g,l=a.host+"/ranking/?sha256="+t,s={"session-token":e},n={headers:s};return await fetch(l,n).then(a.handler).catch(a.error)}static async fetch_songs(e){const t=new g,a=t.host+"/songs",l={"session-token":e},s={headers:l};return new _(await fetch(a,s).then(t.handler).catch(t.error))}static async fetch_tables(e){const t=new g,a=t.host+"/tables",l={"session-token":e},s={headers:l};return new v(await fetch(a,s).then(t.handler).catch(t.error))}static async fetch_play_stats(e){const t=new g,a=t.host+"/stats/my",l={"session-token":e},s={headers:l};return new m(await fetch(a,s).then(t.handler).catch(t.error))}static async logout(e){const t=new g,a=t.host+"/logout",l={"session-token":e},s={headers:l};await fetch(a,s).then(t.handler).catch(t.error)}static async change_user_name(e,t){const a=new g,l=a.host+"/user/name",s=JSON.stringify({changed_name:t}),n={"session-token":e,"content-type":"application/json"},o={headers:n,method:"POST",body:s};return await fetch(l,o).then(a.handler).catch(a.error)}static async change_visibility(e,t){const a=new g,l=a.host+"/user/visibility",s=JSON.stringify({visibility:!!t}),n={"session-token":e,"content-type":"application/json"},o={headers:n,method:"POST",body:s};return await fetch(l,o).then(a.handler).catch(a.error)}static async upload_play_data(e,t,a){const l=new g,s=l.host+"/upload/play_data",n=new FormData,o=new Blob([t],{type:"application/octet-stream"}),r=new Blob([a],{type:"application/octet-stream"});n.append("score",o),n.append("scorelog",r);const i={"session-token":e,"access-control-request-headers":"session-token,content-type"},c={method:"POST",headers:i,body:n};return await fetch(s,c).then(l.handler).catch(l.error)}static async upload_song_data(e,t){const a=new g,l=a.host+"/upload/song_data",s=new FormData,n=new Blob([t],{type:"application/octet-stream"});s.append("songdata",n);const o={"session-token":e,"access-control-request-headers":"session-token,content-type"},r={method:"POST",headers:o,body:s};return u.debug(r),await fetch(l,r).then(a.handler).catch(a.error)}static async reset_score(e){const t=new g,a=t.host+"/reset",l={"session-token":e},s={headers:l,method:"POST"};return await fetch(a,s).then(t.handler).catch(t.error)}async handler(e){return u.debug(e),401===e.status&&u.debug("Need Login"),e.ok||u.debug(e),e.json()}async error(e){return{error:e}}}const L=(0,o.nY)({id:"session",persist:{enabled:!0,strategies:[{key:"session",storage:localStorage}]},state:()=>({accessToken:null,userInfo:null}),actions:{reset(){this.accessToken=null,this.userInfo=null},async change_name(){return this.userInfo&&this.accessToken?await g.change_user_name(this.accessToken,this.userInfo.name).then(e=>(this.userInfo=e,this.userInfo.name+"に更新しました。")).catch(()=>"更新に失敗しました。"):"need login"},async change_visibility(){return this.userInfo&&this.accessToken?await g.change_visibility(this.accessToken,this.userInfo.visibility).then(e=>(this.userInfo=e,this.userInfo.visibility?"プロフィールを表示状態にしました。":"プロフィールを非表示状態にしました。")).catch(()=>"更新に失敗しました。"):"need login"}}});var w=a(144),E=a(8728);const C={id:"page-header"},A={class:"menu"},W={key:0},x={key:1},R=["href"];var M=(0,s.pM)({__name:"HamburgerMenu",props:{is_login:{type:Boolean}},emits:["handleSignOut"],setup(e,{emit:t}){const a=L(),o=(0,E.rd)(),r=t,i=(0,w.KR)(!1),c=()=>{let e="746230605395-g23hslpeod50u4h99gmrfg7ulref0a3u.apps.googleusercontent.com",t="https://bms.katand.net/oauth";return"https://accounts.google.com/o/oauth2/auth?include_granted_scopes=true&redirect_uri="+t+"&scope=openid%20email%20profile&response_type=code&approval_prompt=force&access_type=offline&client_id="+e},u=async()=>{r("handleSignOut")},d=(0,s.EW)(()=>a.userInfo?.user_id||1);return o.afterEach(()=>i.value=!1),(t,a)=>{const o=(0,s.g2)("font-awesome-icon"),r=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",C,[(0,s.Lk)("div",{class:"hamburger_btn",onClick:a[0]||(a[0]=e=>i.value=!i.value)},[(0,s.Lk)("span",{class:(0,n.C4)(["line line_01",(e.is_login?"line-login ":"line-logout ")+(i.value?"btn_line01":"")])},null,2),(0,s.Lk)("span",{class:(0,n.C4)(["line line_02",(e.is_login?"line-login ":"line-logout ")+(i.value?"btn_line02":"")])},null,2),(0,s.Lk)("span",{class:(0,n.C4)(["line line_03",(e.is_login?"line-login ":"line-logout ")+(i.value?"btn_line03":"")])},null,2)]),(0,s.bF)(l.eB,{name:"menu"},{default:(0,s.k6)(()=>[(0,s.bo)((0,s.Lk)("div",A,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.bF)(r,{class:"text-dark px-2",to:"/"},{default:(0,s.k6)(()=>[(0,s.bF)(o,{icon:["fas","home"]}),a[1]||(a[1]=(0,s.eW)(" ホーム ",-1))]),_:1})])]),(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.bF)(r,{class:"text-dark px-2",to:{path:"/view",query:Object.assign({},t.$route.query,{user_id:d.value})}},{default:(0,s.k6)(()=>[(0,s.bF)(o,{icon:["fas","cubes"]}),a[2]||(a[2]=(0,s.eW)(" スコアデータ閲覧 ",-1))]),_:1},8,["to"])]),(0,s.Lk)("li",null,[(0,s.bF)(r,{class:"text-dark px-2",to:{path:"/view/lamp",query:Object.assign({},t.$route.query,{user_id:d.value})}},{default:(0,s.k6)(()=>[(0,s.bF)(o,{icon:["fas","lightbulb"]}),a[3]||(a[3]=(0,s.eW)(" クリアランプ表 ",-1))]),_:1},8,["to"])]),(0,s.Lk)("li",null,[(0,s.bF)(r,{class:"text-dark px-2",to:{path:"/view/rank",query:Object.assign({},t.$route.query,{user_id:d.value})}},{default:(0,s.k6)(()=>[(0,s.bF)(o,{icon:["fas","chart-bar"]}),a[4]||(a[4]=(0,s.eW)(" スコアランク表 ",-1))]),_:1},8,["to"])]),(0,s.Lk)("li",null,[(0,s.bF)(r,{class:"text-dark px-2",to:{path:"/view/stat",query:Object.assign({},t.$route.query,{user_id:d.value})}},{default:(0,s.k6)(()=>[(0,s.bF)(o,{icon:["fas","wrench"]}),a[5]||(a[5]=(0,s.eW)(" 統計 ",-1))]),_:1},8,["to"])])]),e.is_login?((0,s.uX)(),(0,s.CE)("ul",W,[(0,s.Lk)("li",null,[(0,s.bF)(r,{class:"text-dark px-2",to:"/mypage"},{default:(0,s.k6)(()=>[(0,s.bF)(o,{icon:["fas","pencil-alt"]}),a[6]||(a[6]=(0,s.eW)(" マイページ ",-1))]),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(r,{class:"text-dark px-2",to:"/stats"},{default:(0,s.k6)(()=>[(0,s.bF)(o,{icon:["fas","wrench"]}),a[7]||(a[7]=(0,s.eW)(" プレイ履歴 ",-1))]),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(r,{class:"text-dark px-2",to:"/table?user_id="+d.value},{default:(0,s.k6)(()=>[(0,s.bF)(o,{icon:["fas","thumbs-up"]}),a[8]||(a[8]=(0,s.eW)(" おすすめ譜面表 ",-1))]),_:1},8,["to"])]),(0,s.Lk)("li",null,[(0,s.bF)(r,{class:"text-dark px-2",to:"/table-user"},{default:(0,s.k6)(()=>[(0,s.bF)(o,{icon:["fas","table"]}),a[9]||(a[9]=(0,s.eW)(" 難易度表データ ",-1))]),_:1})]),(0,s.Lk)("li",null,[(0,s.Lk)("a",{class:"text-dark px-3",href:"javascript:void(0);",onClick:(0,l.D$)(u,["prevent"])},[(0,s.bF)(o,{icon:["fas","sign-out-alt"]}),a[10]||(a[10]=(0,s.eW)(" ログアウト ",-1))])])])):(0,s.Q3)("",!0),e.is_login?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("ul",x,[(0,s.Lk)("li",null,[(0,s.Lk)("a",{class:"text-dark px-3",href:c()},[(0,s.bF)(o,{icon:["fas","sign-in-alt"]}),a[11]||(a[11]=(0,s.eW)(" 登録/ログイン ",-1))],8,R)])]))],512),[[l.aG,i.value]])]),_:1})])}}}),X=a(1241);const F=(0,X.A)(M,[["__scopeId","data-v-ec2c0bee"]]);var T=F,D=a(6726);const I={id:"app"},K={id:"footer",class:"footer mt-auto py-3"},P={class:"container"};var S=(0,s.pM)({__name:"App",setup(e){const{cookies:t}=(0,D.lT)(),a=L(),l=(0,E.lq)(),n=(0,w.KR)(!1),o=async()=>{await g.logout(a.accessToken),a.accessToken=null,a.userInfo=null,n.value=!1};return(0,s.sV)(async()=>{if(t.get("session-token")&&(a.accessToken=t.get("session-token")),!a.accessToken)return;const e=await g.get_account(a.accessToken);(0,u.debug)(e),n.value=!e.error,e.error?a.accessToken=null:a.userInfo=e}),(0,s.wB)(l,async(e,t)=>{if(n.value&&e.path!==t.path){const e=await g.get_account(a.accessToken);(0,u.debug)(e),e.error&&await o()}}),(e,t)=>{const a=(0,s.g2)("router-view"),l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",I,[(0,s.bF)(T,{is_login:n.value,onHandleSignOut:o},null,8,["is_login"]),(0,s.bF)(a,{is_login:n.value,onHandleSignOut:o},null,8,["is_login"]),(0,s.Lk)("footer",K,[(0,s.Lk)("div",P,[t[1]||(t[1]=(0,s.eW)(" © 2020 KATAND",-1)),t[2]||(t[2]=(0,s.Lk)("br",null,null,-1)),t[3]||(t[3]=(0,s.Lk)("a",{href:"https://twitter.com/dnaTaK"},"twitter@dnaTaK",-1)),t[4]||(t[4]=(0,s.Lk)("br",null,null,-1)),(0,s.bF)(l,{to:"/view/?user_id=1"},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)("Score",-1)])]),_:1})])])])}}});const N=S;var O=N;const $={key:0,id:"profile-edit"},H={class:"input-group"},j={class:"input-group"},B={class:"input-group-prepend"},q={for:"visibility-input",class:"btn btn-outline-secondary"},U={class:"btn btn-outline-primary form-control",for:"visibility-input"};var Y=(0,s.pM)({__name:"ProfileEdit",setup(e){const t=L(),a=(0,w.KR)(""),o=async()=>{a.value=await t.change_name()},r=async()=>{a.value=await t.change_visibility()};return(e,i)=>{const c=(0,s.g2)("font-awesome-icon");return(0,w.R1)(t).userInfo?((0,s.uX)(),(0,s.CE)("div",$,[i[4]||(i[4]=(0,s.Lk)("h2",null,"プロフィール",-1)),(0,s.Lk)("div",H,[i[2]||(i[2]=(0,s.Lk)("div",{class:"input-group-prepend"},[(0,s.Lk)("label",{for:"name-input",class:"btn btn-outline-secondary"},"名前")],-1)),(0,s.bo)((0,s.Lk)("input",{id:"name-input",class:"form-control","onUpdate:modelValue":i[0]||(i[0]=e=>(0,w.R1)(t).userInfo.name=e)},null,512),[[l.Jo,(0,w.R1)(t).userInfo.name]]),(0,s.Lk)("div",{class:"input-group-append"},[(0,s.Lk)("label",{class:"btn btn-success text-nowrap",onClick:o}," 変更を反映 ")])]),i[5]||(i[5]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",j,[(0,s.Lk)("div",B,[(0,s.Lk)("label",q,[i[3]||(i[3]=(0,s.eW)(" プロフィールの表示 ",-1)),(0,s.bF)(c,{icon:["fas","wrench"]})])]),(0,s.bo)((0,s.Lk)("input",{id:"visibility-input",class:"btn-check",type:"checkbox","onUpdate:modelValue":i[1]||(i[1]=e=>(0,w.R1)(t).userInfo.visibility=e),autocomplete:"off"},null,512),[[l.lH,(0,w.R1)(t).userInfo.visibility]]),(0,s.Lk)("label",U,[(0,w.R1)(t).userInfo.visibility?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.eW)(" 表示 ")],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)(" 非表示 ")],64))]),(0,s.Lk)("div",{class:"input-group-append"},[(0,s.Lk)("label",{class:"btn btn-success text-nowrap",onClick:r}," 変更を反映 ")])]),i[6]||(i[6]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" "+(0,n.v_)(a.value),1)])):(0,s.Q3)("",!0)}}});const V=(0,X.A)(Y,[["__scopeId","data-v-ce836032"]]);var Q=V;a(6573),a(8100),a(7936);const G={id:"data-uploader"},J={for:"play_data",class:"btn btn-primary"},z=["disabled"],Z={for:"song_data",class:"btn btn-primary"},ee=["disabled"],te={class:"btn"};var ae=(0,s.pM)({__name:"DataUploader",setup(e){const t=L(),a=(0,w.KR)(),l=(0,w.KR)(),o=(0,w.KR)(),r=(0,w.KR)(),i=(0,w.KR)(),c=(0,s.EW)(()=>!(!a.value||!l.value)),u=(0,s.EW)(()=>!!o.value),d=(0,s.EW)(()=>t.userInfo?t.userInfo.user_id:1),_=e=>{const t=e.target,s=t.files;if(s&&s.length>0){console.log(s);for(const e of s){if("score.db"===e.name){const t=new FileReader;t.onload=e=>{const t=e.target?.result;t instanceof ArrayBuffer&&(a.value=t)},t.onerror=e=>{console.error("error with read file",e)},t.readAsArrayBuffer(e)}if("scorelog.db"===e.name){const t=new FileReader;t.onload=e=>{const t=e.target?.result;t instanceof ArrayBuffer&&(l.value=t)},t.onerror=e=>{console.error("error with read file",e)},t.readAsArrayBuffer(e)}}r.value=!1}},v=e=>{const t=e.target,a=t.files;if(a&&a.length>0)for(const l of a)if("songdata.db"===l.name){const e=new FileReader;e.onload=e=>{const t=e.target?.result;t instanceof ArrayBuffer&&(o.value=t,i.value="")},e.onerror=e=>{console.error("error with read file",e)},e.readAsArrayBuffer(l)}},p=async()=>{await g.upload_play_data(t.accessToken,a.value,l.value),a.value=null,l.value=null,r.value=!0},h=async()=>{await g.upload_song_data(t.accessToken,o.value),o.value=null,i.value="OK"};return(e,t)=>{const b=(0,s.g2)("font-awesome-icon"),k=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",G,[t[9]||(t[9]=(0,s.Lk)("h2",{id:"uploader-title",class:"uploader-title"},"各種データアップロード",-1)),(0,s.Lk)("div",null,[t[2]||(t[2]=(0,s.eW)(" score.db と scorelog.db をアップロードするとスコア情報が更新されます。",-1)),t[3]||(t[3]=(0,s.Lk)("br",null,null,-1)),t[4]||(t[4]=(0,s.eW)(" ファイルは",-1)),t[5]||(t[5]=(0,s.Lk)("em",null,"beatoraja/player/player*",-1)),t[6]||(t[6]=(0,s.eW)("にあります。 ",-1)),(0,s.Lk)("form",null,[(0,s.Lk)("label",J,[(0,s.bF)(b,{icon:["fas","plus"]}),t[0]||(t[0]=(0,s.eW)(" Choose file ",-1)),(0,s.Lk)("input",{id:"play_data",type:"file",onChange:_,accept:".db",multiple:"",required:""},null,32)]),(0,s.Lk)("div",{class:(0,n.C4)(["btn",a.value?"btn-outline-success":"btn-outline-danger"])}," score.db ",2),(0,s.Lk)("div",{class:(0,n.C4)(["btn",l.value?"btn-outline-success":"btn-outline-danger"])}," scorelog.db ",2),(0,s.Lk)("button",{type:"submit",class:(0,n.C4)(["btn",c.value?"btn-info":"btn-outline-info"]),disabled:!c.value,onClick:p}," Submit ",10,z),r.value?((0,s.uX)(),(0,s.Wv)(k,{key:0,class:"btn",to:{path:"/view/",query:Object.assign({},e.$route.query,{user_id:d.value})}},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.eW)(" 結果を見る ",-1)])]),_:1},8,["to"])):(0,s.Q3)("",!0)])]),t[10]||(t[10]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",null,[t[8]||(t[8]=(0,s.eW)(" 表示されない曲がある場合は、songdata.dbをアップロードしてください。 ",-1)),(0,s.Lk)("form",null,[(0,s.Lk)("label",Z,[(0,s.bF)(b,{icon:["fas","plus"]}),t[7]||(t[7]=(0,s.eW)(" Choose file ",-1)),(0,s.Lk)("input",{id:"song_data",type:"file",onChange:v,accept:".db",multiple:"",required:""},null,32)]),(0,s.Lk)("div",{class:(0,n.C4)(["btn",o.value?"btn-outline-success":"btn-outline-danger"])}," songdata.db ",2),(0,s.Lk)("button",{type:"submit",class:(0,n.C4)(["btn",u.value?"btn-info":"btn-outline-info"]),disabled:!u.value,onClick:h}," Submit ",10,ee),(0,s.Lk)("div",te,(0,n.v_)(i.value),1)])]),t[11]||(t[11]=(0,s.Lk)("br",null,null,-1))])}}});const le=(0,X.A)(ae,[["__scopeId","data-v-667fe206"]]);var se=le;const ne={id:"data-reset"},oe={key:0},re={key:1,class:"overlay"};var ie=(0,s.pM)({__name:"DataReset",setup(e){const t=(0,w.KR)(!1),a=L(),l=()=>{t.value=!0},n=async()=>{t.value=!1,await g.reset_score(a.accessToken).then(()=>alert("Data was reset!"))},o=()=>{t.value=!1};return(e,a)=>((0,s.uX)(),(0,s.CE)("div",ne,[a[1]||(a[1]=(0,s.Lk)("h2",null,"スコアデータのリセット",-1)),t.value?((0,s.uX)(),(0,s.CE)("div",re,[(0,s.Lk)("div",{class:"dialog"},[a[0]||(a[0]=(0,s.Lk)("p",null,"本当に実行しますか？この操作は取り消せません。",-1)),(0,s.Lk)("button",{onClick:n,class:"btn btn-danger text-nowrap"},"実行"),(0,s.Lk)("button",{onClick:o,class:"btn btn-info text-nowrap"},"キャンセル")])])):((0,s.uX)(),(0,s.CE)("div",oe,[(0,s.Lk)("button",{onClick:l,class:"btn btn-danger text-nowrap"},"リセットする")]))]))}});const ce=(0,X.A)(ie,[["__scopeId","data-v-19dc8e88"]]);var ue=ce;const de={id:"my-page"};var _e=(0,s.pM)({__name:"MyPage",setup(e){return(e,t)=>((0,s.uX)(),(0,s.CE)("div",de,[t[0]||(t[0]=(0,s.Lk)("h1",null,"マイページ",-1)),(0,s.bF)(Q),(0,s.bF)(se),(0,s.bF)(ue)]))}});const ve=(0,X.A)(_e,[["__scopeId","data-v-58aba823"]]);var pe=ve;a(5367),a(2731);const he={id:"modal-area"},be={key:0,class:"modal-area"},ke={class:"modal-wrapper"},me={class:"modal-contents"},fe={class:"modal-header"},ye={class:"modal-body"};var ge=(0,s.pM)({__name:"ModalBase",setup(e,{expose:t}){const a=(0,w.KR)(!1),n=()=>a.value=!0,o=()=>a.value=!1;return t({showModal:n,closeModal:o}),(e,t)=>{const n=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("div",he,[(0,s.bF)(l.eB,{name:"fade"},{default:(0,s.k6)(()=>[a.value?((0,s.uX)(),(0,s.CE)("div",be,[(0,s.Lk)("div",{id:"modal-bg",class:"modal-bg",onClick:o}),(0,s.Lk)("div",ke,[(0,s.Lk)("div",me,[(0,s.Lk)("div",fe,[(0,s.RG)(e.$slots,"header",{},()=>[t[0]||(t[0]=(0,s.eW)("Modal-header",-1))])]),(0,s.Lk)("div",ye,[(0,s.RG)(e.$slots,"body",{},()=>[t[1]||(t[1]=(0,s.eW)("Modal-body",-1))])])]),(0,s.Lk)("div",{id:"close-modal",class:"close-modal",onClick:o},[(0,s.bF)(n,{icon:["fas","xmark"]})])])])):(0,s.Q3)("",!0)]),_:3})])}}});const Le=(0,X.A)(ge,[["__scopeId","data-v-4e625360"]]);var we=Le,Ee=a(1010),Ce=a(6052);const Ae={id:"logchart"},We={class:"nav nav-tabs mb-3"},xe={class:"nav-item"},Re={class:"nav-item"},Me={class:"nav-item"},Xe={class:"chart-container"},Fe={class:"chart-wrapper"},Te={class:"chart-wrapper"},De={class:"chart-wrapper"};var Ie=(0,s.pM)({__name:"LogChart",props:{logs:{},song:{}},setup(e){Ce.t1.register(Ce.PP,Ce.kc,Ce.FN,Ce.No,Ce.hE,Ce.m_,Ce.s$);const t=e,a=(0,w.KR)("score"),o=(0,w.KR)({}),r=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}),i=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),c=(0,s.EW)(()=>({labels:t.logs.map(e=>r(e.updated_at)),datasets:[{label:"スコア",data:t.logs.map(e=>e.score),borderColor:"#0066ff",backgroundColor:"rgba(0, 102, 255, 0.1)",tension:0,pointRadius:4,pointHoverRadius:6}]})),u=(0,s.EW)(()=>({labels:t.logs.map(e=>r(e.updated_at)),datasets:[{label:"ミス数",data:t.logs.map(e=>-1===e.min_bp?null:e.min_bp),borderColor:"#ff3333",backgroundColor:"rgba(255, 51, 51, 0.1)",tension:0,pointRadius:4,pointHoverRadius:6,spanGaps:!0}]})),d=(0,s.EW)(()=>({labels:t.logs.map(e=>r(e.updated_at)),datasets:[{label:"最大コンボ",data:t.logs.map(e=>e.max_combo),borderColor:"#00cc44",backgroundColor:"rgba(0, 204, 68, 0.1)",tension:0,pointRadius:4,pointHoverRadius:6}]})),_=(e,a)=>({responsive:!0,maintainAspectRatio:!1,layout:{padding:{bottom:50}},interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"#48CAE4",borderWidth:1,callbacks:{title:e=>{const a=e[0].dataIndex;return i(t.logs[a].updated_at)},afterBody:e=>{const a=e[0].dataIndex,l=t.logs[a];return[`クリア: ${l.clear_type}`,`スコア: ${l.score.toLocaleString()}`,`ミス: ${-1===l.min_bp?"未記録":l.min_bp}`,`コンボ: ${l.max_combo.toLocaleString()}`]}}}},scales:{x:{title:{display:!0,text:"更新日",color:"#666"},grid:{color:"rgba(0, 0, 0, 0.1)"}},y:{title:{display:!0,text:e,color:"#666"},grid:{color:"rgba(0, 0, 0, 0.1)"},min:0,...a&&{max:a},ticks:{callback:t=>"ミス数"===e&&-1===t?"N/A":Number(t).toLocaleString()}}}}),v=(0,s.EW)(()=>_("スコア",2*t.song.total_notes)),p=(0,s.EW)(()=>_("ミス数")),h=(0,s.EW)(()=>_("最大コンボ",t.song.total_notes));return(0,s.xo)(()=>{Object.values(o.value).forEach(e=>{e&&"function"===typeof e.destroy&&e.destroy()})}),(e,o)=>((0,s.uX)(),(0,s.CE)("div",Ae,[(0,s.Lk)("ul",We,[(0,s.Lk)("li",xe,[(0,s.Lk)("button",{class:(0,n.C4)(["nav-link",{active:"score"===a.value}]),onClick:o[0]||(o[0]=e=>a.value="score")}," スコア更新グラフ ",2)]),(0,s.Lk)("li",Re,[(0,s.Lk)("button",{class:(0,n.C4)(["nav-link",{active:"bp"===a.value}]),onClick:o[1]||(o[1]=e=>a.value="bp")}," ミスカウント更新グラフ ",2)]),(0,s.Lk)("li",Me,[(0,s.Lk)("button",{class:(0,n.C4)(["nav-link",{active:"combo"===a.value}]),onClick:o[2]||(o[2]=e=>a.value="combo")}," 最大コンボ数更新グラフ ",2)])]),(0,s.Lk)("div",Xe,[(0,s.bo)((0,s.Lk)("div",Fe,[o[3]||(o[3]=(0,s.Lk)("h4",{class:"text-center mb-3"},"スコア",-1)),((0,s.uX)(),(0,s.Wv)((0,w.R1)(Ee.N1),{key:"score-"+t.logs.length,data:c.value,options:v.value,ref:"scoreChart"},null,8,["data","options"]))],512),[[l.aG,"score"===a.value]]),(0,s.bo)((0,s.Lk)("div",Te,[o[4]||(o[4]=(0,s.Lk)("h4",{class:"text-center mb-3"},"ミスカウント",-1)),((0,s.uX)(),(0,s.Wv)((0,w.R1)(Ee.N1),{key:"bp-"+t.logs.length,data:u.value,options:p.value,ref:"bpChart"},null,8,["data","options"]))],512),[[l.aG,"bp"===a.value]]),(0,s.bo)((0,s.Lk)("div",De,[o[5]||(o[5]=(0,s.Lk)("h4",{class:"text-center mb-3"},"最大コンボ",-1)),((0,s.uX)(),(0,s.Wv)((0,w.R1)(Ee.N1),{key:"combo-"+t.logs.length,data:d.value,options:h.value,ref:"comboChart"},null,8,["data","options"]))],512),[[l.aG,"combo"===a.value]])])]))}});const Ke=(0,X.A)(Ie,[["__scopeId","data-v-12f52390"]]);var Pe=Ke;const Se={id:"stats"},Ne={class:"row"},Oe={class:"body"},$e=["innerHTML"],He={class:"body"},je=["innerHTML"],Be={class:"card col-sm-4"},qe={class:"body"},Ue=["innerHTML"],Ye={class:"card col-sm-4"},Ve={class:"body"},Qe=["innerHTML"],Ge={class:"card col-sm-4"},Je={class:"body"},ze=["innerHTML"],Ze={class:"card col-sm-4"},et={class:"body"},tt=["innerHTML"],at={class:"card col-sm-4"},lt={class:"body"},st=["innerHTML"],nt={class:"card col-sm-4"},ot={class:"body"},rt=["innerHTML"],it={id:"song"},ct={class:"row"},ut={class:"card col-sm-4"},dt={class:"body"},_t=["innerHTML"],vt={class:"card col-sm-4"},pt={class:"body"},ht={key:0,id:"graph"},bt={id:"links"},kt={class:"row align-items-center"},mt={class:"card col-6"},ft=["href"],yt={class:"card col-6"},gt=["href"],Lt={class:"card col-6"},wt=["href"],Et={class:"card col-6"},Ct=["href"];var At=(0,s.pM)({__name:"SongModal",setup(e,{expose:t}){const a=(0,w.KR)(),l=(0,w.KR)(),o=(0,w.KR)(),r=(0,w.KR)(),i=(e,t,s)=>{l.value=e,o.value=t,r.value=s,a.value?.showModal()},c=(0,s.EW)(()=>"https://bms-score-viewer.pages.dev/view?md5="+l.value?.md5),u=(0,s.EW)(()=>"https://mocha-repository.info/song.php?sha256="+l.value?.sha256),d=(0,s.EW)(()=>"https://www.gaftalk.com/minir/#/viewer/song/"+l.value?.sha256+"/"+l.value?.mode),_=(0,s.EW)(()=>"http://www.dream-pro.info/~lavalse/LR2IR/search.cgi?mode=ranking&bmsmd5="+l.value?.md5);return t({showModal:i}),(e,t)=>{const i=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.Wv)(we,{id:"song-modal",ref_key:"modal_base",ref:a},{header:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(l.value?.get("level"))+" "+(0,n.v_)(l.value?.get("title")),1)]),body:(0,s.k6)(()=>[(0,s.Lk)("div",Se,[t[8]||(t[8]=(0,s.Lk)("h3",null,"プレイ情報",-1)),(0,s.Lk)("div",Ne,[(0,s.Lk)("div",{class:(0,n.C4)(["card col-sm-4","bg-"+l.value?.get("clear_type")])},[t[0]||(t[0]=(0,s.Lk)("div",{class:"header"},"クリアタイプ",-1)),(0,s.Lk)("div",Oe,[(0,s.Lk)("span",{innerHTML:l.value?.get("clear_type")},null,8,$e)])],2),(0,s.Lk)("div",{class:(0,n.C4)(["card col-sm-4","bg-"+l.value?.get("score_rank")])},[t[1]||(t[1]=(0,s.Lk)("div",{class:"header"},"スコアランク",-1)),(0,s.Lk)("div",He,[(0,s.Lk)("span",{innerHTML:l.value?.get("score_rank")},null,8,je)])],2),(0,s.Lk)("div",Be,[t[2]||(t[2]=(0,s.Lk)("div",{class:"header"},"最終更新日",-1)),(0,s.Lk)("div",qe,[(0,s.Lk)("span",{innerHTML:l.value?.get("date")},null,8,Ue)])]),(0,s.Lk)("div",Ye,[t[3]||(t[3]=(0,s.Lk)("div",{class:"header"},"スコア",-1)),(0,s.Lk)("div",Ve,[(0,s.Lk)("span",{innerHTML:l.value?.get("score")},null,8,Qe)])]),(0,s.Lk)("div",Ge,[t[4]||(t[4]=(0,s.Lk)("div",{class:"header"},"スコアレート",-1)),(0,s.Lk)("div",Je,[(0,s.Lk)("span",{innerHTML:l.value?.get("rate")},null,8,ze)])]),(0,s.Lk)("div",Ze,[t[5]||(t[5]=(0,s.Lk)("div",{class:"header"},"ミスカウント",-1)),(0,s.Lk)("div",et,[(0,s.Lk)("span",{innerHTML:l.value?.get("bp")},null,8,tt)])]),(0,s.Lk)("div",at,[t[6]||(t[6]=(0,s.Lk)("div",{class:"header"},"コンボ",-1)),(0,s.Lk)("div",lt,[(0,s.Lk)("span",{innerHTML:l.value?.get("combo")},null,8,st)])]),(0,s.Lk)("div",nt,[t[7]||(t[7]=(0,s.Lk)("div",{class:"header"},"プレイ回数",-1)),(0,s.Lk)("div",ot,[(0,s.Lk)("span",{innerHTML:l.value?.get("play")},null,8,rt)])])])]),(0,s.Lk)("div",it,[t[12]||(t[12]=(0,s.Lk)("h3",null,"曲情報",-1)),(0,s.Lk)("div",ct,[(0,s.Lk)("div",ut,[t[9]||(t[9]=(0,s.Lk)("div",{class:"header"},"ノーツ",-1)),(0,s.Lk)("div",dt,[(0,s.Lk)("span",{innerHTML:l.value?.get("notes")},null,8,_t)])]),(0,s.Lk)("div",vt,[t[11]||(t[11]=(0,s.Lk)("div",{class:"header"},"Ranking",-1)),(0,s.Lk)("div",pt,[(0,s.bF)(i,{to:{path:"/song",query:Object.assign({},e.$route.query,{sha256:l.value?.sha256,date:o.value})}},{default:(0,s.k6)(()=>[...t[10]||(t[10]=[(0,s.eW)(" IRへ移動 ",-1)])]),_:1},8,["to"])])])])]),r.value&&l.value?((0,s.uX)(),(0,s.CE)("div",ht,[t[13]||(t[13]=(0,s.Lk)("h3",null,"遷移",-1)),(0,s.bF)(Pe,{logs:r.value,song:l.value},null,8,["logs","song"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",bt,[t[14]||(t[14]=(0,s.Lk)("h3",null,"外部リンク",-1)),(0,s.Lk)("div",kt,[(0,s.Lk)("div",mt,[(0,s.Lk)("a",{href:c.value,target:"_blank"},"BMS Score Viewer",8,ft)]),(0,s.Lk)("div",yt,[(0,s.Lk)("a",{href:u.value,target:"_blank"},"Mocha Repository",8,gt)]),(0,s.Lk)("div",Lt,[(0,s.Lk)("a",{href:d.value,target:"_blank"},"MinIR for Beatoraja",8,wt)]),(0,s.Lk)("div",Et,[(0,s.Lk)("a",{href:_.value,target:"_blank"},"Lunatic Rave 2 Internet Ranking",8,Ct)])])])]),_:1},512)}}});const Wt=At;var xt=Wt;class Rt{static columns_default(){return{clear:!0,clear_date:!1,clear_before:!1,level:!0,title:!0,rate:!0,score_rank:!0,detail_rank:!1,score:!0,score_date:!1,score_before:!1,bp:!0,bp_date:!1,bp_before:!1,combo:!0,play:!0,date:!0,clear_update:!1,rank_update:!1,score_update:!1,bp_update:!1,clear_diff_rival:!1,score_diff_rival:!1,bp_diff_rival:!1,rival_date:!1}}constructor(e){(0,r.A)(this,"columns",void 0),this.columns=Rt.columns_default(),Object.assign(this.columns,e)}for_score(){this.columns=Rt.columns_default(),this.columns.score_date=!0,this.columns.score_before=!0}for_bp(){this.columns=Rt.columns_default(),this.columns.bp_date=!0,this.columns.bp_before=!0}for_recent(){this.columns=Rt.columns_default(),this.columns.clear_update=!0,this.columns.score=!1,this.columns.score_date=!1,this.columns.score_update=!0,this.columns.score_rank=!1,this.columns.rank_update=!0,this.columns.bp=!1,this.columns.bp_date=!1,this.columns.bp_update=!0}for_rival(){this.columns=Rt.columns_default(),this.columns.clear_diff_rival=!0,this.columns.score_diff_rival=!0,this.columns.bp_diff_rival=!0,this.columns.rival_date=!0}column_is_active(e){return!!this.columns[e]}visible_columns(){const e=[];return Object.entries(this.columns).filter(t=>{t[1]&&e.push(t[0])}),e}import_columns(e){this.columns={},e.forEach(e=>this.columns[e]=!0)}}var Mt=Object.freeze({LAMP_TYPE:["Max","Perfect","FullCombo","ExHard","Hard","Normal","Easy","LightAssistEasy","AssistEasy","Failed","NoPlay"],LAMP_INDEX:["NoPlay","Failed","AssistEasy","LightAssistEasy","Easy","Normal","Hard","ExHard","FullCombo","Perfect","Max"],LAMP_GRAPH_LIST:[10,9,8,7,6,5,4,3,2,1,0],RANK_TYPE:["Max","AAA","AA","A","B","C","D","E","F"],RANK_RATE_BY_9:[9,8,7,6,5,4,3,2,0],DETAIL_RANK_TYPE:["Max","AAA1","AAA2","AAA3","AA1","AA2","AA3","A1","A2","A3","B1","B2","B3","C1","C2","C3","D1","D2","D3","E1","E2","E3","F1","F2","F3","F4","F5","F6"],DETAIL_RANK_BY_27:[27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0],SONG_FORMAT:[[{level:"",songs:[{level:"Lv1",title:"読込中",max_combo:"1",clear_type:{current:"Easy",before:"NoPlay",updated_at:"1990-01-01T00:00:00+09:00"},score:{current:"123",before:"0",updated_at:"1980-01-01T00:00:00+09:00"},min_bp:{current:"50",before:"0",updated_at:"2000-01-01T00:00:00+09:00"},clear_rank:"AAA",updated_at:"2000-01-01T00:00:00+09:00",play_count:"4",total_notes:"1"}]}]],DETAIL_COLUMNS:[{key:"clear",name:"クリア",title:" ",class:"clear"},{key:"clear_date",name:"クリア更新日",title:"Date(clear)",class:"date"},{key:"clear_before",name:"更新前クリア",title:" ",class:"clear"},{key:"level",name:"難易度",title:"Lv",class:"level"},{key:"title",name:"曲名",title:"Title",class:"title"},{key:"clear_update",name:"クリア更新",title:"ClearDiff",class:"clear_update"},{key:"score_rank",name:"スコアランク",title:"Rank",class:"rank"},{key:"detail_rank",name:"細分化ランク",title:"DRank",class:"rank"},{key:"rank_update",name:"ランク更新",title:"RankDiff",class:"update"},{key:"rate",name:"スコア%",title:"Rate",class:"rate"},{key:"accuracy",name:"正確さ",title:"Accuracy",class:"accuracy"},{key:"score",name:"EXスコア",title:"Ex/Max",class:"score"},{key:"score_date",name:"スコア更新日",title:"Date(score)",class:"date"},{key:"score_before",name:"更新前スコア",title:"Ex(old)",class:"score"},{key:"score_update",name:"スコア更新",title:"ScoreDiff",class:"update"},{key:"bp",name:"ミスカウント",title:"BP",class:"bp"},{key:"bp_date",name:"ミスカウント更新日",title:"Date(BP)",class:"date"},{key:"bp_before",name:"更新前ミスカウント",title:"BP(old)",class:"bp"},{key:"bp_update",name:"ミスカウント更新",title:"BpDiff",class:"update"},{key:"combo",name:"最高コンボ",title:"Combo",class:"combo"},{key:"play",name:"プレイ回数",title:"Play",class:"play"},{key:"date",name:"更新日",title:"Date",class:"date"},{key:"clear_diff_rival",name:"ライバルとのクリア差",title:"ClearVS",class:"clear_vs"},{key:"score_diff_rival",name:"ライバルとのスコア差",title:"ScoreVS",class:"score_vs"},{key:"bp_diff_rival",name:"ライバルとのBP差",title:"BPVS",class:"bp_vs"},{key:"rival_date",name:"ライバルの更新日",title:"RivalDate",class:"date"}]});class Xt{constructor(){(0,r.A)(this,"title","曲データなし"),(0,r.A)(this,"total_notes",0),(0,r.A)(this,"md5",""),(0,r.A)(this,"sha256",""),(0,r.A)(this,"clear_rank",Xt.make_clear_rank(0,0)),(0,r.A)(this,"rival_clear_rank",void 0),(0,r.A)(this,"score",void 0),(0,r.A)(this,"rival_score",void 0),(0,r.A)(this,"score_before",void 0),(0,r.A)(this,"score_updated_at",void 0),(0,r.A)(this,"min_bp",void 0),(0,r.A)(this,"min_bp_before",void 0),(0,r.A)(this,"rival_min_bp",void 0),(0,r.A)(this,"min_bp_updated_at",void 0),(0,r.A)(this,"play_count",void 0),(0,r.A)(this,"max_combo",void 0),(0,r.A)(this,"rival_max_combo",void 0),(0,r.A)(this,"clear_type",void 0),(0,r.A)(this,"rival_clear_type",void 0),(0,r.A)(this,"clear_type_before",void 0),(0,r.A)(this,"clear_updated_at",void 0),(0,r.A)(this,"level",""),(0,r.A)(this,"updated_at",void 0),(0,r.A)(this,"rival_updated_at",void 0),(0,r.A)(this,"mode",void 0);const e=new i;this.max_combo=e.max_combo,this.clear_type=e.clear_type,this.clear_type_before=e.clear_type_before,this.clear_updated_at=new Date(e.clear_updated_at),this.score=e.score,this.score_before=e.score_before,this.score_updated_at=new Date(e.score_updated_at),this.min_bp=e.min_bp,this.min_bp_before=e.min_bp_before,this.min_bp_updated_at=new Date(e.min_bp_updated_at),this.clear_rank=Xt.make_clear_rank(this.total_notes,this.score),this.updated_at=new Date(e.updated_at),this.play_count=e.play_count,this.mode=0,this.rival_max_combo=e.max_combo,this.rival_clear_type=e.clear_type,this.rival_score=e.score,this.rival_min_bp=e.min_bp,this.rival_clear_rank=Xt.make_clear_rank(this.total_notes,this.rival_score),this.rival_updated_at=new Date(e.updated_at)}init_song(e,t){e?(this.title=e.title,this.total_notes=e.notes,this.md5=e.md5,this.sha256=e.sha256,this.clear_rank=Xt.make_clear_rank(this.total_notes,this.score)):this.md5=t}init_score(e){this.max_combo=e.max_combo,this.clear_type=e.clear_type,this.clear_type_before=e.clear_type_before,this.clear_updated_at=new Date(e.clear_updated_at),this.score=e.score,this.score_before=e.score_before,this.score_updated_at=new Date(e.score_updated_at),this.min_bp=e.min_bp,this.min_bp_before=e.min_bp_before,this.min_bp_updated_at=new Date(e.min_bp_updated_at),this.clear_rank=Xt.make_clear_rank(this.total_notes,this.score),this.updated_at=new Date(e.updated_at),this.play_count=e.play_count}init_rival_score(e){this.rival_max_combo=e.max_combo,this.rival_clear_type=e.clear_type,this.rival_score=e.score,this.rival_min_bp=e.min_bp,this.rival_clear_rank=Xt.make_clear_rank(this.total_notes,this.rival_score),this.rival_updated_at=new Date(e.updated_at)}static make_clear_rank_index(e,t){const a=2*e;return Mt.RANK_RATE_BY_9.findIndex(e=>~~((e*a+8)/9)<=t)}static make_clear_rank(e,t){return e?Mt.RANK_TYPE[this.make_clear_rank_index(e,t)]:Mt.RANK_TYPE.slice(-1)[0]}static make_next_rank(e,t){if(!e)return Mt.RANK_TYPE.slice(-1)[0];const a=2*e,l=Mt.RANK_RATE_BY_9.findIndex(e=>~~((e*a+8)/9)<=t);return Mt.RANK_TYPE[0==l?0:l-1]}static make_next_rank_score(e,t){if(!e)return 0;const a=2*e,l=Mt.RANK_RATE_BY_9.findIndex(e=>~~((e*a+8)/9)<=t);return~~((Mt.RANK_RATE_BY_9[0==l?0:l-1]*a+8)/9)-t}static make_detail_rank(e,t){if(!e)return Mt.DETAIL_RANK_TYPE.slice(-1)[0];const a=2*e;return Mt.DETAIL_RANK_TYPE[Mt.DETAIL_RANK_BY_27.findIndex(e=>~~((e*a+26)/27)<=t)]}static make_next_detail_rank(e,t){if(!e)return Mt.DETAIL_RANK_TYPE.slice(-1)[0];const a=2*e,l=Mt.DETAIL_RANK_BY_27.findIndex(e=>~~((e*a+26)/27)<=t);return Mt.DETAIL_RANK_TYPE[0==l?0:l-1]}static make_next_detail_rank_score(e,t){if(!e)return 0;const a=2*e,l=Mt.DETAIL_RANK_BY_27.findIndex(e=>~~((e*a+26)/27)<=t);return~~((Mt.DETAIL_RANK_BY_27[0==l?0:l-1]*a+26)/27)-t}static dummy(){return Object.assign(new Xt,Mt.SONG_FORMAT[0][0].songs)}score_rate(){return 0===this.total_notes?0:this.score/this.total_notes*50}bp_is_win(){return this.min_bp===this.rival_min_bp?"draw":-1===this.min_bp||2147483647===this.min_bp?"lose":-1===this.rival_min_bp||2147483647===this.rival_min_bp?"win":this.min_bp>this.rival_min_bp?"lose":"win"}bp_diff(){return-1===this.min_bp||2147483647===this.min_bp||-1===this.rival_min_bp||2147483647===this.rival_min_bp?"-":Math.abs(this.min_bp-this.rival_min_bp).toString()}set_level(e){this.level=e}static cmp_title(e,t){return e.title===t.title?0:e.title.toLowerCase()>t.title.toLowerCase()?1:-1}static cmp(e,t,a,l,s){const n=e.sort_key(a,s),o=t.sort_key(a,s);return n===o?0:n<o!==l?-1:1}sort_key(e,t){switch(e){case"level":return t.indexOf(this.level);case"clear":return this.clear_type;case"clear_update":return this.get("clear_date")===this.get("date")?10*this.clear_type+(this.clear_type_before-this.clear_type):this.clear_type;case"title":return this.title.toLowerCase();case"rate":return this.score_rate();case"score_rank":return this.score_rate();case"rank_update":return this.get("score_date")===this.get("date")&&Xt.make_clear_rank(this.total_notes,this.score)!==Xt.make_clear_rank(this.total_notes,this.score_before)?10*(10-Xt.make_clear_rank_index(this.total_notes,this.score))+(Xt.make_clear_rank_index(this.total_notes,this.score_before)-Xt.make_clear_rank_index(this.total_notes,this.score)):this.score_rate()/100;case"detail_rank":return this.score_rate();case"accuracy":return this.score_rate();case"score":return this.score;case"bp":return this.min_bp;case"combo":return this.max_combo;case"play":return this.play_count;case"date":return this.updated_at;case"score_before":return this.score_before;case"score_date":return this.score_updated_at;case"score_update":return this.get("score_date")===this.get("date")?1e4*this.score:this.score;case"bp_date":return this.min_bp_updated_at;case"bp_before":return this.min_bp_before;case"bp_update":return this.get("bp_date")===this.get("date")?-1===this.min_bp?0:1e4*this.min_bp:this.min_bp;case"clear_date":return this.clear_updated_at;case"clear_before":return this.clear_type_before;case"clear_diff_rival":return this.clear_type-this.rival_clear_type;case"score_diff_rival":return this.score-this.rival_score;case"bp_diff_rival":{const e=-1===this.min_bp?this.total_notes:this.min_bp,t=-1===this.rival_min_bp?this.total_notes:this.rival_min_bp;return t-e}case"rival_date":return this.rival_updated_at;case"random_select":return Math.floor(Math.random()*Math.floor(1e8));default:return 0}}get(e){switch(e){case"clear":return"";case"clear_type_index":return this.clear_type;case"clear_type":return Mt.LAMP_INDEX[this.clear_type];case"rival_clear_type":return Mt.LAMP_INDEX[this.rival_clear_type];case"title":return this.title;case"level":return this.level;case"notes":return this.total_notes;case"rate":return Ft(this.total_notes,this.score);case"rival_rate":return Ft(this.total_notes,this.rival_score);case"score_rank":return Xt.make_clear_rank(this.total_notes,this.score);case"next_rank":return Xt.make_next_rank(this.total_notes,this.score);case"next_rank_score":return Xt.make_next_rank_score(this.total_notes,this.score);case"detail_rank":return Xt.make_detail_rank(this.total_notes,this.score);case"next_detail_rank":return Xt.make_next_detail_rank(this.total_notes,this.score);case"next_detail_rank_score":return Xt.make_next_detail_rank_score(this.total_notes,this.score);case"rival_rank":return Xt.make_clear_rank(this.total_notes,this.rival_score);case"score":return`${this.score}/${2*this.total_notes}`;case"score_rate":return 0===this.total_notes?0:this.score/this.total_notes/2;case"rival_score":return this.rival_score;case"score_before":return this.score_before;case"score_date":return this.score_updated_at.getFullYear()<2e3?"---":this.score_updated_at.toLocaleDateString("sv-SE");case"bp":return-1===this.min_bp?"---":this.min_bp;case"rival_bp":return this.rival_min_bp;case"bp_before":return-1===this.min_bp_before?"---":this.min_bp_before;case"bp_date":return this.min_bp_updated_at.getFullYear()<2e3?"---":this.min_bp_updated_at.toLocaleDateString("sv-SE");case"clear_before":return"";case"clear_type_before":return Mt.LAMP_INDEX[this.clear_type_before];case"clear_date":return this.clear_updated_at.getFullYear()<2e3?"---":this.clear_updated_at.toLocaleDateString("sv-SE");case"combo":return this.max_combo;case"rival_combo":return this.rival_max_combo;case"combos":return`${this.max_combo}/${this.total_notes}`;case"combo_rate":return 0===this.total_notes?0:this.max_combo/this.total_notes;case"play":return-1===this.play_count?"---":this.play_count;case"date":return this.updated_at.getFullYear()<2e3?"---":this.updated_at.toLocaleDateString("sv-SE");case"clear_diff_rival":return this.clear_type===this.rival_clear_type?'<span class="draw">draw</span>':this.clear_type<this.rival_clear_type?'<span class="lose">lose</span>':'<span class="win">win</span>';case"score_diff_rival":{const e=this.score-this.rival_score,t=0===e?"draw":e>0?"win":"lose";return"<span class="+t+">"+e+"</span>"}case"bp_diff_rival":if(-1===this.rival_min_bp||-1===this.min_bp)return"---";{const e=this.min_bp-this.rival_min_bp,t=0===e?"draw":e>0?"lose":"win";return"<span class="+t+">"+e+"</span>"}case"rival_date":return this.rival_updated_at.getFullYear()<2e3?"---":this.rival_updated_at.toLocaleDateString("sv-SE")}}}const Ft=(e,t)=>0===e?"00.00":t===2*e?"100.0":(t/e*50).toFixed(2);var Tt=(0,s.pM)({__name:"DataCell",props:{columns:{},name:{}},emits:["click"],setup(e,{emit:t}){const a=e,l=t,n=(0,s.EW)(()=>a.columns.column_is_active(a.name)),o=()=>l("click");return(e,t)=>n.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"td",onClick:o},[(0,s.RG)(e.$slots,"default")])):(0,s.Q3)("",!0)}});const Dt=Tt;var It=Dt;const Kt={key:0},Pt={key:1},St={key:0},Nt={class:"update_strong"},Ot={key:1},$t={key:0},Ht={key:0},jt={class:"update_strong"},Bt={key:1},qt={key:1},Ut={key:0},Yt={class:"update_strong"},Vt={key:1},Qt={key:0},Gt={key:0,class:"update_strong"},Jt={key:1,class:"update_strong"},zt={key:1};var Zt=(0,s.pM)({__name:"RowSong",props:{song:{},percentile:{type:Boolean},columns:{}},emits:["showModal"],setup(e,{emit:t}){const a=e,l=t,o=(0,s.EW)(()=>"table-line-"+Mt.LAMP_INDEX[a.song.clear_type]),r=(0,s.EW)(()=>"bg-"+Mt.LAMP_INDEX[a.song.clear_type]),i=(0,s.EW)(()=>"bg-"+Mt.LAMP_INDEX[a.song.clear_type_before]),c=(0,s.EW)(()=>"bg-"+Mt.LAMP_INDEX[a.song.rival_clear_type]),u=(0,s.EW)(()=>"bg-"+a.song.clear_rank),d=(0,s.EW)(()=>a.song.level),_=(0,s.EW)(()=>a.song.title),v=(0,s.EW)(()=>-1===a.song.min_bp?"-":a.song.min_bp),p=(0,s.EW)(()=>a.song.get("date")),h=(0,s.EW)(()=>a.song.get("clear_date")),b=(0,s.EW)(()=>a.song.get("score_date")),k=(0,s.EW)(()=>a.song.get("bp_date")),m=(0,s.EW)(()=>a.song.play_count<=0?"-":a.song.play_count),f=(0,s.EW)(()=>Xt.make_clear_rank(a.song.total_notes,a.song.score)),y=(0,s.EW)(()=>Xt.make_detail_rank(a.song.total_notes,a.song.score)),g=(0,s.EW)(()=>a.song.get("next_rank")),L=(0,s.EW)(()=>a.song.get("next_rank_score")),E=(0,s.EW)(()=>a.song.clear_type===a.song.rival_clear_type?"draw":a.song.clear_type<a.song.rival_clear_type?"lose":"win"),C=(0,s.EW)(()=>0===a.song.score||0===a.song.rival_score?"-":Math.abs(a.song.score-a.song.rival_score)),A=(0,s.EW)(()=>0===C.value?"draw":a.song.score-a.song.rival_score<0?"lose":"win"),W=(0,s.EW)(()=>a.song.bp_diff()),x=(0,s.EW)(()=>a.song.bp_is_win()),R=(0,s.EW)(()=>a.song.get("rival_date")),M=(0,s.EW)(()=>a.song.score-a.song.score_before),X=(0,s.EW)(()=>Ft(a.song.total_notes,M.value)),F=(0,s.EW)(()=>D.value!==f.value&&p.value===b.value),T=(0,s.EW)(()=>a.song.score_before!==a.song.score&&p.value===b.value),D=(0,s.EW)(()=>Xt.make_clear_rank(a.song.total_notes,a.song.score_before)),I=()=>l("showModal",a.song);return(t,a)=>{const l=(0,s.g2)("font-awesome-icon"),K=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("div",{class:(0,n.C4)(["tr",o.value])},[(0,s.bF)(It,{class:(0,n.C4)(["clear",r.value]),columns:e.columns,name:"clear"},null,8,["columns","class"]),(0,s.bF)(It,{class:"date",columns:e.columns,name:"clear_date"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(h.value),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:(0,n.C4)(["clear",i.value]),columns:e.columns,name:"clear_before"},null,8,["columns","class"]),(0,s.bF)(It,{class:"level",columns:e.columns,name:"level"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(d.value),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"title",columns:e.columns,name:"title",onClick:a[0]||(a[0]=e=>I())},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(_.value),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"update",columns:e.columns,name:"clear_update"},{default:(0,s.k6)(()=>[e.song.clear_type>0&&h.value===p.value?((0,s.uX)(),(0,s.CE)("span",Kt,[(0,s.bo)((0,s.bF)(l,{icon:["fas","square"],class:(0,n.C4)("color-"+(0,w.R1)(Mt).LAMP_INDEX[e.song.clear_type_before])},null,8,["class"]),[[K,(0,w.R1)(Mt).LAMP_INDEX[e.song.clear_type_before]]]),(0,s.bF)(l,{icon:["fas","long-arrow-alt-right"],style:{"margin-inline":"0.2em"}}),(0,s.bo)((0,s.bF)(l,{icon:["fas","square"],class:(0,n.C4)("color-"+(0,w.R1)(Mt).LAMP_INDEX[e.song.clear_type])},null,8,["class"]),[[K,(0,w.R1)(Mt).LAMP_INDEX[e.song.clear_type]]])])):((0,s.uX)(),(0,s.CE)("span",Pt,[(0,s.bo)((0,s.bF)(l,{icon:["fas","square"],class:(0,n.C4)("color-"+(0,w.R1)(Mt).LAMP_INDEX[e.song.clear_type])},null,8,["class"]),[[K,(0,w.R1)(Mt).LAMP_INDEX[e.song.clear_type]]])]))]),_:1},8,["columns"]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(It,{class:"rank",columns:e.columns,name:"score_rank"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(f.value),1)]),_:1},8,["columns"])),[[K,g.value+"-"+L.value]]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(It,{class:"rank",columns:e.columns,name:"detail_rank"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(y.value),1)]),_:1},8,["columns"])),[[K,g.value+"-"+L.value]]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(It,{class:"update",columns:e.columns,name:"rank_update"},{default:(0,s.k6)(()=>[F.value?((0,s.uX)(),(0,s.CE)("span",St,[(0,s.eW)((0,n.v_)(D.value)+" ",1),(0,s.bF)(l,{icon:["fas","long-arrow-alt-right"],style:{"margin-right":"0.2em"}}),(0,s.Lk)("span",Nt,(0,n.v_)(f.value),1)])):((0,s.uX)(),(0,s.CE)("span",Ot,(0,n.v_)(f.value),1))]),_:1},8,["columns"])),[[K,g.value+"-"+L.value]]),(0,s.bF)(It,{class:(0,n.C4)(["rate",u.value]),columns:e.columns,name:"rate"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)((0,w.R1)(Ft)(e.song.total_notes,e.song.score)),1)]),_:1},8,["columns","class"]),(0,s.bF)(It,{class:"rate",columns:e.columns,name:"accuracy"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(e.song.score===2*e.song.total_notes?"MAX":(e.song.total_notes/(2*e.song.total_notes-e.song.score)).toFixed(2)),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"score",columns:e.columns,name:"score"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(`${e.song.score}/${2*e.song.total_notes}`),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"date",columns:e.columns,name:"score_date"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(b.value),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"score",columns:e.columns,name:"score_before"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(e.song.score_before),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"update",columns:e.columns,name:"score_update"},{default:(0,s.k6)(()=>[e.percentile?((0,s.uX)(),(0,s.CE)("span",$t,[T.value?((0,s.uX)(),(0,s.CE)("span",Ht,[(0,s.Lk)("span",jt,"+"+(0,n.v_)(X.value),1),(0,s.eW)(" ("+(0,n.v_)((0,w.R1)(Ft)(e.song.total_notes,e.song.score))+")% ",1)])):((0,s.uX)(),(0,s.CE)("span",Bt,(0,n.v_)((0,w.R1)(Ft)(e.song.total_notes,e.song.score))+"%",1))])):((0,s.uX)(),(0,s.CE)("span",qt,[T.value?((0,s.uX)(),(0,s.CE)("span",Ut,[(0,s.Lk)("span",Yt,"+"+(0,n.v_)(M.value),1),(0,s.eW)(" ("+(0,n.v_)(e.song.score)+") ",1)])):((0,s.uX)(),(0,s.CE)("span",Vt,(0,n.v_)(e.song.score),1))]))]),_:1},8,["columns"]),(0,s.bF)(It,{class:"bp",columns:e.columns,name:"bp"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(-1===e.song.min_bp||2147483647===e.song.min_bp?"---":e.song.min_bp),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"date",columns:e.columns,name:"bp_date"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(k.value),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"bp",columns:e.columns,name:"bp_before"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(-1===e.song.min_bp_before?"---":e.song.min_bp_before),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"update",columns:e.columns,name:"bp_update"},{default:(0,s.k6)(()=>["-"!==v.value&&k.value===p.value?((0,s.uX)(),(0,s.CE)("span",Qt,[-1!==e.song.min_bp_before?((0,s.uX)(),(0,s.CE)("span",Gt,(0,n.v_)(e.song.min_bp-e.song.min_bp_before),1)):((0,s.uX)(),(0,s.CE)("span",Jt,"new")),(0,s.eW)(" ("+(0,n.v_)(v.value)+") ",1)])):((0,s.uX)(),(0,s.CE)("span",zt,(0,n.v_)(v.value),1))]),_:1},8,["columns"]),(0,s.bF)(It,{class:"combo",columns:e.columns,name:"combo"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(e.song.max_combo),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"play",columns:e.columns,name:"play"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(m.value),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:"date",columns:e.columns,name:"date"},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(p.value),1)]),_:1},8,["columns"]),(0,s.bF)(It,{class:(0,n.C4)(["clear_vs",c.value]),columns:e.columns,name:"clear_diff_rival"},{default:(0,s.k6)(()=>[(0,s.Lk)("span",{class:(0,n.C4)(E.value)},(0,n.v_)(E.value),3)]),_:1},8,["columns","class"]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(It,{class:"score_vs",columns:e.columns,name:"score_diff_rival"},{default:(0,s.k6)(()=>[(0,s.Lk)("span",{class:(0,n.C4)(A.value)},(0,n.v_)(C.value),3)]),_:1},8,["columns"])),[[K,"rival: "+e.song.rival_score]]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(It,{class:"bp_vs",columns:e.columns,name:"bp_diff_rival"},{default:(0,s.k6)(()=>[(0,s.Lk)("span",{class:(0,n.C4)(x.value)},(0,n.v_)(W.value),3)]),_:1},8,["columns"])),[[K,"rival: "+e.song.rival_min_bp]]),(0,s.bF)(It,{name:"rival_date",class:"date",columns:e.columns},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(R.value),1)]),_:1},8,["columns"])],2)}}});const ea=Zt;var ta=ea;class aa{constructor(e){(0,r.A)(this,"sort_desc",!1),(0,r.A)(this,"sort_key","title"),(0,r.A)(this,"columns",new Rt({})),(0,r.A)(this,"visible_lamp",new la({})),(0,r.A)(this,"visible_rank",new sa({})),(0,r.A)(this,"rival_lamp",new la({})),(0,r.A)(this,"rival_rank",new sa({})),(0,r.A)(this,"rival_vs",new na({})),(0,r.A)(this,"day_until",0),(0,r.A)(this,"day_since",36500),(0,r.A)(this,"max_length",100),u.debug("filter constructed by ",e),e&&(this.sort_desc=e.sort_desc,this.sort_key=e.sort_key,this.columns=new Rt(e.columns),this.visible_lamp=new la(e.visible_lamp),this.visible_rank=new sa(e.visible_rank),this.rival_lamp=new la(e.rival_lamp),this.rival_rank=new sa(e.rival_rank),this.day_until=e.day_until,this.max_length=e.max_length)}set_sort(e){this.sort_key===e&&(this.sort_desc=!this.sort_desc),this.sort_key=e}set_columns(e){e&&(this.columns=e)}sort_key_is_active(e){return this.sort_key===e}visible_reverse(){la.reverse(this.visible_lamp)}visible_all_lamp_type(){this.visible_lamp.to_all()}visible_not_full_combo(){this.visible_lamp.to_not_full_combo()}visible_not_ex_hard(){this.visible_lamp.to_not_ex_hard()}visible_not_hard(){this.visible_lamp.to_not_hard()}visible_not_easy(){this.visible_lamp.to_not_easy()}filter_all_term(){this.day_until=0}filter_older_half_year(){this.day_until=180}filter_older_one_year(){this.day_until=365}filter_older_two_year(){this.day_until=730}apply(e,t){return this.visible_lamp.lamps[e.clear_type]&&this.visible_rank.ranks[e.clear_rank]&&(!t||this.rival_lamp.lamps[e.rival_clear_type]&&this.rival_rank.ranks[e.rival_clear_rank]&&this.rival_vs.apply(e))&&this.viewable_date(e.updated_at.toLocaleDateString("sv-SE"))}viewable_date(e){const t=new Date;t.setDate(t.getDate()-this.day_until);const a=new Date;return a.setDate(a.getDate()-this.day_since),k.format(t)>=e&&k.format(a)<=e}default(){Object.assign(this,new aa(null))}for_recent(){this.sort_key="date",this.sort_desc=!0,this.day_until=0,this.columns.for_recent()}for_rival(){this.sort_key="score_diff_rival",this.sort_desc=!0,this.columns.for_rival()}for_random(){this.sort_key="",this.sort_key="random_select",this.sort_desc=!1,this.day_until=0}for_score(){this.sort_key="score_date",this.sort_desc=!1,this.day_until=0,this.columns.for_score(),this.visible_all_lamp_type(),this.visible_rank.to_all()}for_bp(){this.sort_key="bp_date",this.sort_desc=!1,this.day_until=0,this.columns.for_bp(),this.visible_all_lamp_type(),this.visible_rank.to_all()}for_aaa(){this.sort_key="rate",this.sort_desc=!0,this.day_until=0,this.columns.for_score(),this.visible_all_lamp_type(),this.visible_rank.to_not_aaa()}for_aa(){this.sort_key="rate",this.sort_desc=!0,this.day_until=0,this.columns.for_score(),this.visible_all_lamp_type(),this.visible_rank.to_not_aa()}for_easy(){this.sort_key="bp",this.sort_desc=!1,this.day_until=0,this.columns.for_bp(),this.visible_not_easy(),this.visible_rank.to_all()}for_hard(){this.sort_key="bp",this.sort_desc=!1,this.day_until=0,this.columns.for_bp(),this.visible_not_hard(),this.visible_rank.to_all()}for_ex_hard(){this.sort_key="bp",this.sort_desc=!1,this.day_until=0,this.columns.for_bp(),this.visible_not_ex_hard(),this.visible_rank.to_all()}for_full_combo(){this.sort_key="bp",this.sort_desc=!1,this.day_until=0,this.columns.for_bp(),this.visible_not_full_combo(),this.visible_rank.to_all()}visible_columns(){return this.columns.visible_columns()}}class la{constructor(e){(0,r.A)(this,"lamps",[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]);for(let t=0;t<Mt.LAMP_TYPE.length;t+=1)this.lamps[t]=!0;Object.assign(this,e)}static reverse(e){for(let t=0;t<Mt.LAMP_TYPE.length;t+=1)e.lamps[t]=!e.lamps[t]}visible(e){const t=Mt.LAMP_INDEX.indexOf(e);return this.lamps[t]}to_all(){for(let e=0;e<Mt.LAMP_TYPE.length;e+=1)this.lamps[e]=!0}to_not_full_combo(){this.to_all(),this.lamps[10]=!1,this.lamps[9]=!1,this.lamps[8]=!1}to_not_ex_hard(){this.to_not_full_combo(),this.lamps[7]=!1}to_not_hard(){this.to_not_ex_hard(),this.lamps[6]=!1}to_not_easy(){this.to_not_hard(),this.lamps[5]=!1,this.lamps[4]=!1}}class sa{constructor(e){(0,r.A)(this,"ranks",{Max:!0,AAA:!0,AA:!0,A:!0,B:!0,C:!0,D:!0,E:!0,F:!0}),this.ranks.Max=!0,this.ranks.AAA=!0,this.ranks.AA=!0,this.ranks.A=!0,this.ranks.B=!0,this.ranks.C=!0,this.ranks.D=!0,this.ranks.E=!0,this.ranks.F=!0,Object.assign(this.ranks,e)}to_all(){Mt.RANK_TYPE.forEach(e=>this.ranks[e]=!0)}to_not_aaa(){this.to_all(),this.ranks.Max=!1,this.ranks.AAA=!1}to_not_aa(){this.to_not_aaa(),this.ranks.AA=!1}}class na{constructor(e){(0,r.A)(this,"types",{scoreWin:!0,scoreDraw:!0,scoreLose:!0,bpWin:!0,bpDraw:!0,bpLose:!0,clearWin:!0,clearDraw:!0,clearLose:!0}),this.types.scoreWin=!0,this.types.scoreDraw=!0,this.types.scoreLose=!0,this.types.bpWin=!0,this.types.bpDraw=!0,this.types.bpLose=!0,this.types.clearWin=!0,this.types.clearDraw=!0,this.types.clearLose=!0,Object.assign(this,e)}apply(e){if(!this.types.scoreWin&&e.score>e.rival_score)return!1;if(!this.types.scoreDraw&&e.score==e.rival_score)return!1;if(!this.types.scoreLose&&e.score<e.rival_score)return!1;const t=e.bp_is_win();return!(!this.types.bpWin&&"win"==t)&&(!(!this.types.bpDraw&&"draw"==t)&&(!(!this.types.bpLose&&"lose"==t)&&(!(!this.types.clearWin&&e.clear_type>e.rival_clear_type)&&(!(!this.types.clearDraw&&e.clear_type==e.rival_clear_type)&&!(!this.types.clearLose&&e.clear_type<e.rival_clear_type)))))}}const oa=(0,o.nY)({id:"filter",persist:{enabled:!0,strategies:[{key:"filter",storage:localStorage}]},state:()=>({filter:new aa(null),checked_tables:new h}),actions:{setSort(e){this.filter.set_sort(e)},setColumns(e){this.filter.set_columns(e)},setLength(e){this.filter.max_length=e||1},setCheckedTables(e){this.checked_tables=e}}});var ra=(0,s.pM)({__name:"HeaderCell",props:{columns:{},name:{}},setup(e){const t=oa(),a=e,o=(0,s.EW)(()=>t.filter),r=(0,s.EW)(()=>a.columns?.column_is_active(a.name)),i=(0,s.EW)(()=>o.value.sort_key_is_active(a.name)),c=()=>t.setSort(a.name);return(e,t)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{class:(0,n.C4)(["th",i.value?"sort_active":"sort_inactive"]),onClick:c},[(0,s.RG)(e.$slots,"default")],2)),[[l.aG,r.value]])}});const ia=ra;var ca=ia;const ua={class:"thead"},da={class:"tr"};var _a=(0,s.pM)({__name:"RowHeader",props:{columns:Rt},setup(e){return(t,a)=>((0,s.uX)(),(0,s.CE)("div",ua,[(0,s.Lk)("div",da,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).DETAIL_COLUMNS,t=>((0,s.uX)(),(0,s.Wv)(ca,{key:t.key,class:(0,n.C4)(t.class),columns:e.columns,name:t.key},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(t.title),1)]),_:2},1032,["class","columns","name"]))),128))])]))}});const va=_a;var pa=va;const ha={class:"colgroup"},ba=["columns","name"];var ka=(0,s.pM)({__name:"RowColGroup",props:{columns:{type:Rt,require:!0}},setup(e){const t=e,a=(0,s.EW)(()=>Mt.DETAIL_COLUMNS.filter(e=>t.columns?.column_is_active(e.name)));return(t,l)=>((0,s.uX)(),(0,s.CE)("div",ha,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,t=>((0,s.uX)(),(0,s.CE)("div",{key:t.key,class:(0,n.C4)(["col",t.class]),columns:e.columns,name:t.key},null,10,ba))),128))]))}});const ma=ka;var fa=ma,ya=a(2125),ga=a.n(ya);const La={class:"calendar-container"},wa={class:"calendar-header"},Ea={class:"month-title"},Ca={class:"calendar-grid"},Aa={class:"calendar-body"},Wa=["title","onClick"],xa={class:"day-number"},Ra={key:0,class:"play-indicator"},Ma={key:0,id:"stats-download-area",class:"download-area selected-day-details"},Xa={class:"details-header"},Fa={class:"header-buttons download-ignore"},Ta={key:0},Da={class:"details-content"},Ia={class:"stats-section"},Ka={class:"stats-grid"},Pa={class:"stat-item"},Sa={class:"stat-value"},Na={class:"stat-item"},Oa={class:"stat-value"},$a={class:"stat-item"},Ha={class:"stat-value"},ja={class:"stat-item"},Ba={class:"stat-value"},qa={class:"stats-section"},Ua={class:"stats-grid"},Ya={class:"stat-item"},Va={class:"stat-value"},Qa={class:"stat-item"},Ga={class:"stat-value"},Ja={class:"stat-item"},za={class:"stat-value"},Za={class:"stat-item"},el={class:"stat-value"},tl={key:1,class:"no-play-message"},al={key:2,class:"table-wrapper"},ll={class:"score-table detail"},sl={class:"tbody"};var nl=(0,s.pM)({__name:"PlayCalendar",props:{history:{}},setup(e){const t=L(),a=oa(),l=(0,s.EW)(()=>{const e=new Rt({});return e.for_recent(),e.columns.play=!1,e}),o=(0,w.KR)(),r=(0,s.EW)(()=>m.value.level_list()),i=(0,s.EW)(()=>!!m.value),c=(0,s.EW)(()=>!!h.value),u=(0,s.EW)(()=>!!f.value),d=(0,s.EW)(()=>i.value&&u.value&&c.value),_=(0,s.EW)(()=>{if(!d.value)return[];let e=[],t={};for(let a=0;a<m.value.tables.length;a+=1){const l=m.value.tables[a];for(const a in l.levels){const s=l.levels[a];if(s)for(const l of s){if(t[l])continue;if(t[l]=!0,!h.value?.score_exists(l))continue;let s=new Xt;s.set_level(a),s.init_score(h.value.get_score(l)),s.init_song(f.value.get_score(l),l),e.push(s)}}}return e}),p=e,h=(0,w.KR)(),b=(0,w.KR)(new Date),k=(0,w.KR)(null);(0,s.sV)(()=>{g.fetch_tables(t.accessToken).then(e=>m.value=e),g.fetch_songs(t.accessToken).then(e=>f.value=e)});const m=(0,w.KR)(new v([])),f=(0,w.KR)(),y=(0,s.EW)(()=>{let e=_.value;return e.sort((e,t)=>Xt.cmp(e,t,a.filter.sort_key,a.filter.sort_desc,r.value)).slice(0,a.filter.max_length||e.length)}),E=(0,s.EW)(()=>b.value.getFullYear()),C=(0,s.EW)(()=>b.value.getMonth()),A=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],W=(0,s.EW)(()=>{const e=[...p.history.logs].sort((e,t)=>e.date.localeCompare(t.date)),t=new Map;for(let a=0;a<e.length;a++){const l=e[a],s=a>0?e[a-1]:null,n={date:l.date,daily:{play_count:s?l.play_count-s.play_count:l.play_count,clear_count:s?l.clear_count-s.clear_count:l.clear_count,notes_count:s?l.notes()-s.notes():l.notes(),play_time:s?l.play_time-s.play_time:l.play_time},total:{play_count:l.play_count,clear_count:l.clear_count,notes_count:l.notes(),play_time:l.play_time}};t.set(l.date,n)}return t}),x=(0,s.EW)(()=>Date.UTC(E.value,C.value,1)),R=(0,s.EW)(()=>{const e=new Date(x.value),t=e.getDay();return e.setDate(e.getDate()-t),e}),M=(0,s.EW)(()=>{const e=[],t=new Date(R.value);for(let a=0;a<6;a++){const a=[];for(let e=0;e<7;e++){const e=t.toISOString().split("T")[0],l=W.value.get(e);a.push({date:new Date(t),dateString:e,isCurrentMonth:t.getMonth()===C.value,playData:l||null}),t.setDate(t.getDate()+1)}e.push(a)}return e}),X=e=>{if(!e)return"#f0f0f0";const t=e.daily.play_count;return 0===t?"#ebedf0":t<20?"#c6e48b":t<40?"#7bc96f":t<60?"#239a3b":"#198127"},F=e=>{const t=Math.floor(e/3600),a=Math.floor(e%3600/60);return t>0?`${t}時間${a}分`:`${a}分`},T=e=>{if(!e.playData)return`${e.dateString}\nプレイなし`;const t=e.playData.daily,a=e.playData.total;return`${e.dateString}\n【当日】\nプレイ数: ${t.play_count}\nクリア数: ${t.clear_count}\nノーツ数: ${t.notes_count.toLocaleString()}\nプレイ時間: ${F(t.play_time)}\n\n【累計】\nプレイ数: ${a.play_count.toLocaleString()}\nクリア数: ${a.clear_count.toLocaleString()}\nノーツ数: ${a.notes_count.toLocaleString()}\nプレイ時間: ${F(a.play_time)}`},D=e=>{k.value=e;const a=new Date(k.value.date);a.setTime(a.getTime()+864e5);const l=new Date(k.value.date),s=new Date(a),n=l.getTimezoneOffset();l.setMinutes(l.getMinutes()+n),s.setMinutes(s.getMinutes()+n),t.userInfo&&g.fetch_score(l,s,t.userInfo.user_id,t.accessToken).then(e=>h.value=e)},I=e=>{const t=new Date(e);return t.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"long"})},K=e=>{const t=new Date(b.value);t.setMonth(t.getMonth()+e),b.value=t,k.value=null},P=()=>{b.value=new Date,k.value=null},S=async e=>{let a=await g.fetch_my_score(e.sha256,t.accessToken);o.value?.showModal(e,k.value,a.log)},N=async()=>{const e=document.getElementById("stats-download-area");if(e)try{const t=await ga()(e,{backgroundColor:"#ffffff",scale:2,useCORS:!0,logging:!1,width:1e3,windowWidth:1160,ignoreElements:e=>e.classList.contains("download-ignore")}),a=document.createElement("a");a.download=`beatoraja-stats-${k.value?.dateString||"unknown"}.png`,a.href=t.toDataURL("image/png"),a.click()}catch(t){console.error("画像のダウンロードに失敗しました:",t),alert("画像のダウンロードに失敗しました")}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",La,[(0,s.Lk)("div",wa,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>K(-1)),class:"nav-button"},"‹"),(0,s.Lk)("h3",Ea,(0,n.v_)(E.value)+"年 "+(0,n.v_)(A[C.value]),1),(0,s.Lk)("button",{onClick:t[1]||(t[1]=e=>K(1)),class:"nav-button"},"›")]),(0,s.Lk)("button",{onClick:P,class:"today-button"},"今月"),(0,s.Lk)("div",Ca,[t[3]||(t[3]=(0,s.Fv)('<div class="weekdays" data-v-17c62bc7><div class="weekday" data-v-17c62bc7>日</div><div class="weekday" data-v-17c62bc7>月</div><div class="weekday" data-v-17c62bc7>火</div><div class="weekday" data-v-17c62bc7>水</div><div class="weekday" data-v-17c62bc7>木</div><div class="weekday" data-v-17c62bc7>金</div><div class="weekday" data-v-17c62bc7>土</div></div>',1)),(0,s.Lk)("div",Aa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(M.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"week"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,n.C4)(["day",{"other-month":!e.isCurrentMonth,"has-play":e.playData&&e.playData.daily.play_count>0,selected:k.value&&k.value.dateString===e.dateString}]),style:(0,n.Tr)({backgroundColor:X(e.playData)}),title:T(e),onClick:t=>D(e)},[(0,s.Lk)("span",xa,(0,n.v_)(e.date.getDate()),1),e.playData&&e.playData.daily.play_count>0?((0,s.uX)(),(0,s.CE)("div",Ra,(0,n.v_)(e.playData.daily.play_count),1)):(0,s.Q3)("",!0)],14,Wa))),128))]))),128))])]),t[15]||(t[15]=(0,s.Fv)('<div class="legend" data-v-17c62bc7><span class="legend-label" data-v-17c62bc7>日別プレイ数:</span><div class="legend-items" data-v-17c62bc7><div class="legend-item" data-v-17c62bc7><div class="legend-color" style="background-color:#ebedf0;" data-v-17c62bc7></div><span data-v-17c62bc7>0</span></div><div class="legend-item" data-v-17c62bc7><div class="legend-color" style="background-color:#c6e48b;" data-v-17c62bc7></div><span data-v-17c62bc7>1-19</span></div><div class="legend-item" data-v-17c62bc7><div class="legend-color" style="background-color:#7bc96f;" data-v-17c62bc7></div><span data-v-17c62bc7>20-39</span></div><div class="legend-item" data-v-17c62bc7><div class="legend-color" style="background-color:#239a3b;" data-v-17c62bc7></div><span data-v-17c62bc7>40-59</span></div><div class="legend-item" data-v-17c62bc7><div class="legend-color" style="background-color:#198127;" data-v-17c62bc7></div><span data-v-17c62bc7>60+</span></div></div></div>',1)),k.value?((0,s.uX)(),(0,s.CE)("div",Ma,[(0,s.Lk)("div",Xa,[(0,s.Lk)("h4",null,(0,n.v_)(I(k.value.dateString)),1),(0,s.Lk)("div",Fa,[(0,s.Lk)("button",{onClick:N,class:"download-button",title:"画像としてダウンロード"}," 📷 ダウンロード "),(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>k.value=null),class:"close-button"},"×")])]),k.value.playData?((0,s.uX)(),(0,s.CE)("div",Ta,[(0,s.Lk)("div",Da,[(0,s.Lk)("div",Ia,[t[8]||(t[8]=(0,s.Lk)("h5",null,"当日の実績",-1)),(0,s.Lk)("div",Ka,[(0,s.Lk)("div",Pa,[t[4]||(t[4]=(0,s.Lk)("span",{class:"stat-label"},"プレイ数",-1)),(0,s.Lk)("span",Sa,(0,n.v_)(k.value.playData.daily.play_count),1)]),(0,s.Lk)("div",Na,[t[5]||(t[5]=(0,s.Lk)("span",{class:"stat-label"},"クリア数",-1)),(0,s.Lk)("span",Oa,(0,n.v_)(k.value.playData.daily.clear_count),1)]),(0,s.Lk)("div",$a,[t[6]||(t[6]=(0,s.Lk)("span",{class:"stat-label"},"ノーツ数",-1)),(0,s.Lk)("span",Ha,(0,n.v_)(k.value.playData.daily.notes_count.toLocaleString()),1)]),(0,s.Lk)("div",ja,[t[7]||(t[7]=(0,s.Lk)("span",{class:"stat-label"},"プレイ時間",-1)),(0,s.Lk)("span",Ba,(0,n.v_)(F(k.value.playData.daily.play_time)),1)])])]),(0,s.Lk)("div",qa,[t[13]||(t[13]=(0,s.Lk)("h5",null,"累計実績",-1)),(0,s.Lk)("div",Ua,[(0,s.Lk)("div",Ya,[t[9]||(t[9]=(0,s.Lk)("span",{class:"stat-label"},"プレイ数",-1)),(0,s.Lk)("span",Va,(0,n.v_)(k.value.playData.total.play_count.toLocaleString()),1)]),(0,s.Lk)("div",Qa,[t[10]||(t[10]=(0,s.Lk)("span",{class:"stat-label"},"クリア数",-1)),(0,s.Lk)("span",Ga,(0,n.v_)(k.value.playData.total.clear_count.toLocaleString()),1)]),(0,s.Lk)("div",Ja,[t[11]||(t[11]=(0,s.Lk)("span",{class:"stat-label"},"ノーツ数",-1)),(0,s.Lk)("span",za,(0,n.v_)(k.value.playData.total.notes_count.toLocaleString()),1)]),(0,s.Lk)("div",Za,[t[12]||(t[12]=(0,s.Lk)("span",{class:"stat-label"},"プレイ時間",-1)),(0,s.Lk)("span",el,(0,n.v_)(F(k.value.playData.total.play_time)),1)])])])])])):((0,s.uX)(),(0,s.CE)("div",tl,[...t[14]||(t[14]=[(0,s.Lk)("p",null,"この日はプレイしていません",-1)])])),k.value&&h.value&&k.value.playData?((0,s.uX)(),(0,s.CE)("div",al,[(0,s.Lk)("div",ll,[(0,s.bF)(fa,{columns:l.value},null,8,["columns"]),(0,s.bF)(pa,{columns:l.value},null,8,["columns"]),(0,s.Lk)("div",sl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.value,e=>((0,s.uX)(),(0,s.Wv)(ta,{key:e.md5,song:e,columns:l.value,percentile:!1,onShowModal:S},null,8,["song","columns"]))),128))])])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.bF)(xt,{ref_key:"song_modal",ref:o},null,512)]))}});const ol=(0,X.A)(nl,[["__scopeId","data-v-17c62bc7"]]);var rl=ol;const il={id:"history-page"};var cl=(0,s.pM)({__name:"PlayStats",setup(e){const t=L(),a=(0,w.KR)(m["default"]());return g.fetch_play_stats(t.accessToken).then(e=>a.value=e),(e,t)=>((0,s.uX)(),(0,s.CE)("section",il,[t[0]||(t[0]=(0,s.Lk)("h2",null,"プレイ履歴",-1)),(0,s.bF)(rl,{history:a.value},null,8,["history"])]))}});const ul=(0,X.A)(cl,[["__scopeId","data-v-9c6954ee"]]);var dl=ul;const _l={id:"recommend-table"},vl={class:"mb-4"},pl={class:"input-group col-sm-12",role:"group","aria-label":"Difficulty Table"},hl={class:"input-group-prepend"},bl={for:"table",class:"btn btn-info text-nowrap"},kl={class:"mb-4"},ml={class:"form-group row align-items-center"},fl={class:"btn-group col-sm-12"},yl=["value"],gl={id:"preview",class:"container"},Ll={key:0,class:"table-responsive"},wl={class:"table"},El="難易度表を選択してください";var Cl=(0,s.pM)({__name:"RecommendTable",props:{user_id:{}},setup(e){const t=L(),a=e,o=(0,w.KR)(v["default"]()),r=(0,w.KR)("");(0,s.sV)(()=>{g.fetch_tables(t.accessToken).then(e=>{o.value=e,r.value=""})});const i=(0,s.EW)(()=>o.value.name_list()),c=(0,s.EW)(()=>o.value&&""!==r.value?g.get_table_header_url(a.user_id,o.value.get_id_by_name(r.value)):El),u=(0,w.KR)(),d=(0,w.KR)(),_=()=>{g.get_table_header(a.user_id,o.value.get_id_by_name(r.value)).then(e=>{d.value=e}),g.get_table(a.user_id,o.value.get_id_by_name(r.value)).then(e=>{u.value=e})};return(e,t)=>{const a=(0,s.g2)("font-awesome-icon"),o=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("div",_l,[t[9]||(t[9]=(0,s.Lk)("h2",{class:"mb-2"},"おすすめ譜面表",-1)),t[10]||(t[10]=(0,s.Lk)("p",null,"beatorajaのプレイデータを元に、プレイ日時が古い曲をピックアップする難易度表を作成します。",-1)),(0,s.Lk)("div",vl,[t[2]||(t[2]=(0,s.Lk)("h3",null,"難易度表の指定",-1)),(0,s.Lk)("div",pl,[(0,s.Lk)("div",hl,[(0,s.bo)(((0,s.uX)(),(0,s.CE)("label",bl,[t[1]||(t[1]=(0,s.eW)(" 難易度表 ",-1)),(0,s.bF)(a,{icon:["fas","question-circle"]})])),[[o,"作成元となる難易度表"]])]),(0,s.bo)((0,s.Lk)("select",{id:"table",class:"form-control",name:"table","onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),onChange:_},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e,t)=>((0,s.uX)(),(0,s.CE)("option",{key:t},(0,n.v_)(e),1))),128))],544),[[l.u1,r.value]])])]),(0,s.Lk)("div",kl,[t[4]||(t[4]=(0,s.Lk)("h3",null,"難易度表の登録",-1)),t[5]||(t[5]=(0,s.Lk)("p",null,"下記URLをbeatorajaに追加して下さい。",-1)),(0,s.Lk)("div",ml,[(0,s.Lk)("div",fl,[t[3]||(t[3]=(0,s.Lk)("label",{for:"url_box"},null,-1)),(0,s.Lk)("input",{id:"url_box",class:"form-control",type:"text",value:c.value,disabled:""},null,8,yl)])])]),(0,s.Lk)("div",gl,[t[7]||(t[7]=(0,s.Lk)("h3",null,"プレビュー",-1)),t[8]||(t[8]=(0,s.Lk)("p",null,[(0,s.eW)("難易度表のプレビューです。"),(0,s.Lk)("br"),(0,s.eW)("スコア情報や元となる難易度表に更新があれば、おすすめされる曲目が変化します。")],-1)),d.value&&u.value?((0,s.uX)(),(0,s.CE)("div",Ll,[(0,s.Lk)("h4",null,(0,n.v_)(d.value.name),1),(0,s.Lk)("table",wl,[t[6]||(t[6]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Level"),(0,s.Lk)("th",null,"Title"),(0,s.Lk)("th",null,"Artist")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",null,(0,n.v_)(e.level),1),(0,s.Lk)("td",null,(0,n.v_)(e.title),1),(0,s.Lk)("td",null,(0,n.v_)(e.artist),1)]))),128))])])])):(0,s.Q3)("",!0)])])}}});const Al=(0,X.A)(Cl,[["__scopeId","data-v-46d1e026"]]);var Wl=Al;const xl=["id","checked"],Rl=["for"],Ml=["id","checked","onChange"],Xl=["for"];var Fl=(0,s.pM)({__name:"LevelSelect",props:{table:{},checks:{}},setup(e){const t=e;return(a,l)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.RG)(a.$slots,"header",{},()=>[(0,s.Lk)("h3",null,[(0,s.Lk)("input",{type:"checkbox",id:"all_"+e.table.id,checked:(0,w.R1)(b).is_all_active(t.checks),onChange:l[0]||(l[0]=e=>(0,w.R1)(b).check_all(t.checks,t.table))},null,40,xl),(0,s.Lk)("label",{for:"all_"+e.table.id},(0,n.v_)(e.table.name),9,Rl)])]),(0,s.RG)(a.$slots,"list",{},()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.table.level_list,a=>((0,s.uX)(),(0,s.CE)("div",{class:"btn",key:a},[(0,s.Lk)("input",{type:"checkbox",id:e.table.id+"_"+a,checked:(0,w.R1)(b).is_active(t.checks,a),onChange:e=>(0,w.R1)(b).change_active(t.checks,a)},null,40,Ml),(0,s.Lk)("label",{for:e.table.id+"_"+a},(0,n.v_)(a),9,Xl)]))),128))])]))}});const Tl=Fl;var Dl=Tl;const Il=["checked"];var Kl=(0,s.pM)({__name:"ModalForSelectTable",props:{tables:{},checks:{}},setup(e,{expose:t}){const a=(0,w.KR)(),l=e,n=()=>a.value?.showModal();return t({showModal:n}),(t,n)=>((0,s.uX)(),(0,s.Wv)(we,{id:"graph-modal",ref_key:"modal_base",ref:a},{header:(0,s.k6)(()=>[...n[1]||(n[1]=[(0,s.Lk)("h2",null,"表示難易度選択",-1)])]),body:(0,s.k6)(()=>[(0,s.Lk)("h3",null,[(0,s.Lk)("input",{type:"checkbox",id:"all_tables",checked:(0,w.R1)(h).is_all_active(l.checks,l.tables),onChange:n[0]||(n[0]=e=>(0,w.R1)(h).check_all(l.checks,l.tables))},null,40,Il),n[2]||(n[2]=(0,s.Lk)("label",{for:"all_tables"},"全選択",-1))]),n[3]||(n[3]=(0,s.Lk)("hr",null,null,-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.tables.tables,t=>((0,s.uX)(),(0,s.CE)("div",{key:t.name},[(0,s.bF)(Dl,{table:t,checks:(0,w.R1)(h).get(e.checks,t)},null,8,["table","checks"])]))),128))]),_:1},512))}});const Pl=Kl;var Sl=Pl;const Nl={class:"align-items-center row"},Ol={class:"row"},$l=["onClick"];var Hl=(0,s.pM)({__name:"ModalUserSelect",props:{user_id:{type:Number,require:!1},rival_mode:{type:Boolean}},emits:["setUser"],setup(e,{expose:t,emit:a}){const l=L(),o=a;(0,s.sV)(()=>{g.get_user_list(u.value).then(e=>{i.value=e,i.value.sort((e,t)=>e.id-t.id)})});const r=(0,w.KR)(),i=(0,w.KR)([]),c=(0,w.KR)(new Date),u=(0,s.EW)(()=>l.accessToken),d=()=>{r.value?.showModal()},_=()=>r.value?.closeModal(),v=e=>{o("setUser",e,c.value)},p=()=>{c.value=new Date};return t({showModal:d,closeModal:_}),(t,a)=>{const l=(0,s.g2)("DatePicker"),o=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.Wv)(we,{ref_key:"modal_base",ref:r},{header:(0,s.k6)(()=>[(0,s.Lk)("h2",null,(0,n.v_)(e.rival_mode?"ライバルの":"")+"プレイ状況の取得",1)]),body:(0,s.k6)(()=>[a[1]||(a[1]=(0,s.Lk)("h3",null,"日付の選択",-1)),a[2]||(a[2]=(0,s.eW)(" 指定した当時のプレイ状況を再現します。",-1)),a[3]||(a[3]=(0,s.Lk)("br",null,null,-1)),a[4]||(a[4]=(0,s.eW)("LR2からインポートしたデータや、プレイ回数などは再現されません。 ",-1)),(0,s.Lk)("div",Nl,[(0,s.bF)(l,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),class:"col-sm-10",format:"yyyy-MM-dd",enableTimePicker:!1},null,8,["modelValue"]),(0,s.Lk)("label",{onClick:p,class:"btn btn-danger col-sm-2"},[(0,s.bF)(o,{icon:["fas","undo"]})])]),a[5]||(a[5]=(0,s.Lk)("hr",null,null,-1)),a[6]||(a[6]=(0,s.Lk)("h3",null,"プレイヤーの選択",-1)),a[7]||(a[7]=(0,s.eW)(" プロフィールを公開しているプレイヤーのみ表示されます。",-1)),a[8]||(a[8]=(0,s.Lk)("br",null,null,-1)),a[9]||(a[9]=(0,s.eW)(" 非表示の方はログインすることで自分のデータが閲覧できます。 ",-1)),(0,s.Lk)("div",Ol,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,e=>((0,s.uX)(),(0,s.CE)("div",{class:"btn btn-outline-secondary col-sm-4",key:e.id,onClick:t=>v(e.id)},(0,n.v_)(e.name),9,$l))),128))])]),_:1},512)}}});const jl=Hl;var Bl=jl;const ql={id:"song_filter"},Ul={class:"filter"},Yl=["id","value","onUpdate:modelValue"],Vl=["for"],Ql={class:"filter"},Gl=["id","value","onUpdate:modelValue"],Jl=["for"],zl={class:"filter"},Zl={class:"filter"},es={class:"btn"},ts=["disabled"],as={class:"btn"},ls=["disabled"],ss={class:"btn"},ns=["disabled"],os={class:"btn"},rs=["disabled"],is={class:"btn"},cs=["disabled"],us={class:"btn"},ds=["disabled"],_s={class:"btn"},vs=["disabled"],ps={class:"btn"},hs=["disabled"],bs={class:"btn"},ks=["disabled"],ms={class:"filter"},fs=["id","value","onUpdate:modelValue","disabled"],ys=["for"],gs={class:"filter"},Ls=["id","value","onUpdate:modelValue","disabled"],ws=["for"];var Es=(0,s.pM)({__name:"FilterModal",props:{rival_mode:{}},setup(e,{expose:t}){const a=oa(),o=(0,w.KR)(),r=e,i=(0,s.EW)(()=>a.filter),c=(0,s.EW)(()=>r.rival_mode),u=()=>o.value?.showModal();return t({showModal:u}),(e,t)=>((0,s.uX)(),(0,s.Wv)(we,{id:"filter-modal",ref_key:"modal_base",ref:o},{header:(0,s.k6)(()=>[...t[19]||(t[19]=[(0,s.Lk)("h2",null,"譜面フィルター設定",-1)])]),body:(0,s.k6)(()=>[(0,s.Lk)("div",ql,[(0,s.Lk)("div",Ul,[t[20]||(t[20]=(0,s.Lk)("h5",null,"クリアタイプ",-1)),(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).LAMP_GRAPH_LIST,e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"btn"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:""+e,value:e,"onUpdate:modelValue":t=>i.value.visible_lamp.lamps[e]=t},null,8,Yl),[[l.lH,i.value.visible_lamp.lamps[e]]]),(0,s.Lk)("label",{for:""+e},(0,n.v_)((0,w.R1)(Mt).LAMP_INDEX[e]),9,Vl)]))),128))]),(0,s.Lk)("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=e=>i.value.visible_reverse())}," 表示反転 "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[1]||(t[1]=e=>i.value.visible_all_lamp_type())}," 全表示 "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[2]||(t[2]=e=>i.value.visible_not_full_combo())}," 未FC "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[3]||(t[3]=e=>i.value.visible_not_ex_hard())}," 未EXH "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[4]||(t[4]=e=>i.value.visible_not_hard())}," 未HARD "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[5]||(t[5]=e=>i.value.visible_not_easy())}," 未EASY ")]),t[32]||(t[32]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",Ql,[t[21]||(t[21]=(0,s.Lk)("h5",null,"スコアランク",-1)),(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).RANK_TYPE,e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"btn"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:e,value:e,"onUpdate:modelValue":t=>i.value.visible_rank.ranks[e]=t},null,8,Gl),[[l.lH,i.value.visible_rank.ranks[e]]]),(0,s.Lk)("label",{for:e},(0,n.v_)(e),9,Jl)]))),128))])]),t[33]||(t[33]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",zl,[t[22]||(t[22]=(0,s.Lk)("h5",null,"更新日時",-1)),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[6]||(t[6]=e=>i.value.filter_all_term())}," 全期間 "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[7]||(t[7]=e=>i.value.filter_older_half_year())}," 半年以上更新なし "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[8]||(t[8]=e=>i.value.filter_older_one_year())}," 1年以上更新なし "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[9]||(t[9]=e=>i.value.filter_older_two_year())}," 2年以上更新なし ")]),t[34]||(t[34]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",Zl,[(0,s.Lk)("h5",null,"ライバル勝敗"+(0,n.v_)(c.value?"":"(ライバル未設定)"),1),(0,s.Lk)("div",null,[(0,s.Lk)("div",es,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival_score_win","onUpdate:modelValue":t[10]||(t[10]=e=>i.value.rival_vs.types.scoreWin=e),disabled:!c.value},null,8,ts),[[l.lH,i.value.rival_vs.types.scoreWin]]),t[23]||(t[23]=(0,s.Lk)("label",{for:"rival_score_win"},"スコア勝利",-1))]),(0,s.Lk)("div",as,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival_score_draw","onUpdate:modelValue":t[11]||(t[11]=e=>i.value.rival_vs.types.scoreDraw=e),disabled:!c.value},null,8,ls),[[l.lH,i.value.rival_vs.types.scoreDraw]]),t[24]||(t[24]=(0,s.Lk)("label",{for:"rival_score_draw"},"スコア引き分け",-1))]),(0,s.Lk)("div",ss,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival_score_lose","onUpdate:modelValue":t[12]||(t[12]=e=>i.value.rival_vs.types.scoreLose=e),disabled:!c.value},null,8,ns),[[l.lH,i.value.rival_vs.types.scoreLose]]),t[25]||(t[25]=(0,s.Lk)("label",{for:"rival_score_lose"},"スコア敗北",-1))])]),(0,s.Lk)("div",null,[(0,s.Lk)("div",os,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival_bp_win","onUpdate:modelValue":t[13]||(t[13]=e=>i.value.rival_vs.types.bpWin=e),disabled:!c.value},null,8,rs),[[l.lH,i.value.rival_vs.types.bpWin]]),t[26]||(t[26]=(0,s.Lk)("label",{for:"rival_bp_win"},"ミスカウント勝利",-1))]),(0,s.Lk)("div",is,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival_bp_draw","onUpdate:modelValue":t[14]||(t[14]=e=>i.value.rival_vs.types.bpDraw=e),disabled:!c.value},null,8,cs),[[l.lH,i.value.rival_vs.types.bpDraw]]),t[27]||(t[27]=(0,s.Lk)("label",{for:"rival_bp_draw"},"ミスカウント引き分け",-1))]),(0,s.Lk)("div",us,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival_bp_lose","onUpdate:modelValue":t[15]||(t[15]=e=>i.value.rival_vs.types.bpLose=e),disabled:!c.value},null,8,ds),[[l.lH,i.value.rival_vs.types.bpLose]]),t[28]||(t[28]=(0,s.Lk)("label",{for:"rival_bp_lose"},"ミスカウント敗北",-1))])]),(0,s.Lk)("div",null,[(0,s.Lk)("div",_s,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival_clear_win","onUpdate:modelValue":t[16]||(t[16]=e=>i.value.rival_vs.types.clearWin=e),disabled:!c.value},null,8,vs),[[l.lH,i.value.rival_vs.types.clearWin]]),t[29]||(t[29]=(0,s.Lk)("label",{for:"rival_clear_win"},"クリア勝利",-1))]),(0,s.Lk)("div",ps,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival_clear_draw","onUpdate:modelValue":t[17]||(t[17]=e=>i.value.rival_vs.types.clearDraw=e),disabled:!c.value},null,8,hs),[[l.lH,i.value.rival_vs.types.clearDraw]]),t[30]||(t[30]=(0,s.Lk)("label",{for:"rival_clear_draw"},"クリア引き分け",-1))]),(0,s.Lk)("div",bs,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival_clear_lose","onUpdate:modelValue":t[18]||(t[18]=e=>i.value.rival_vs.types.clearLose=e),disabled:!c.value},null,8,ks),[[l.lH,i.value.rival_vs.types.clearLose]]),t[31]||(t[31]=(0,s.Lk)("label",{for:"rival_clear_lose"},"クリア敗北",-1))])])]),t[35]||(t[35]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",ms,[(0,s.Lk)("h5",null,"ライバルのクリアタイプ"+(0,n.v_)(c.value?"":"(ライバル未設定)"),1),(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).LAMP_GRAPH_LIST,e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"btn"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival"+e,value:e,"onUpdate:modelValue":t=>i.value.rival_lamp.lamps[e]=t,disabled:!c.value},null,8,fs),[[l.lH,i.value.rival_lamp.lamps[e]]]),(0,s.Lk)("label",{for:"rival"+e},(0,n.v_)((0,w.R1)(Mt).LAMP_INDEX[e]),9,ys)]))),128))])]),t[36]||(t[36]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",gs,[(0,s.Lk)("h5",null,"ライバルのスコアランク"+(0,n.v_)(c.value?"":"(ライバル未設定)"),1),(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).RANK_TYPE,e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"btn"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"rival"+e,value:e,"onUpdate:modelValue":t=>i.value.rival_rank.ranks[e]=t,disabled:!c.value},null,8,Ls),[[l.lH,i.value.rival_rank.ranks[e]]]),(0,s.Lk)("label",{for:"rival"+e},(0,n.v_)(e),9,ws)]))),128))])])])]),_:1},512))}});const Cs=(0,X.A)(Es,[["__scopeId","data-v-5c04f713"]]);var As=Cs,Ws=(0,s.pM)({__name:"GraphModal",setup(e,{expose:t}){const a=(0,w.KR)(),l=(0,w.KR)(""),o=(0,w.KR)([]),r=(e,t)=>{l.value=e,o.value=t,a.value?.showModal()};return t({showModal:r}),(e,t)=>((0,s.uX)(),(0,s.Wv)(we,{id:"graph-modal",ref_key:"modal_base",ref:a},{header:(0,s.k6)(()=>[(0,s.Lk)("h2",null,(0,n.v_)(l.value),1)]),body:(0,s.k6)(()=>[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.value,(e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e),1))),128))])]),_:1},512))}});const xs=Ws;var Rs=xs;const Ms={id:"lamp-graph"},Xs={style:{width:"100%"}},Fs={class:"progress",style:{width:"100%",height:"1.8em"}},Ts={style:{width:"100%"}},Ds={style:{width:"30px"}},Is={class:"progress",style:{width:"100%",height:"1.8em"}},Ks=["onClick"];var Ps=(0,s.pM)({__name:"LampGraph",props:{filtered_score:{},tables:{},checks:{}},setup(e){const t=oa(),a=e,l=(0,w.KR)(),o=(0,s.EW)(()=>r.value.map(e=>e.level_list.map(e=>Mt.LAMP_INDEX.map((t,l)=>a.filtered_score.filter(t=>t.clear_type===l&&t.level===e).sort(Xt.cmp_title))))),r=(0,s.EW)(()=>h.filter_active_tables(a.checks,a.tables)),i=(e,t)=>l.value?.showModal(e,t),c=(e,t,a)=>o.value[e][t][a].sort(Xt.cmp_title).map(e=>e.title);return(e,a)=>{const u=(0,s.g2)("font-awesome-icon"),d=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("div",Ms,[a[0]||(a[0]=(0,s.eW)(" 凡例 ",-1)),(0,s.Lk)("table",Xs,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",Fs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).LAMP_TYPE,e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:(0,n.C4)("progress-bar bg-"+e),role:"progressbar",style:(0,n.Tr)([{color:"#000000"},"width: "+100/(0,w.R1)(Mt).LAMP_TYPE.length+"%"])},[(0,s.Lk)("span",null,[(0,s.eW)((0,n.v_)(e)+" ",1),(0,w.R1)(t).filter.visible_lamp.visible(e)?(0,s.Q3)("",!0):(0,s.bo)(((0,s.uX)(),(0,s.Wv)(u,{key:0,icon:["fas","circle-exclamation"]},null,512)),[[d,"非表示中です"]])])],6))),128))])])]),a[1]||(a[1]=(0,s.Lk)("hr",null,null,-1)),r.value.length>0?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(r.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("h2",null,(0,n.v_)(e.name),1),(0,s.Lk)("table",Ts,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.level_list,(e,a)=>((0,s.uX)(),(0,s.CE)("tr",{key:a,style:{width:"100%"}},[(0,s.Lk)("td",Ds,(0,n.v_)(e),1),(0,s.Lk)("td",Is,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).LAMP_GRAPH_LIST,l=>((0,s.uX)(),(0,s.CE)("div",{key:(0,w.R1)(Mt).LAMP_INDEX[l],class:(0,n.C4)("progress-bar bg-"+(0,w.R1)(Mt).LAMP_INDEX[l]),role:"progressbar",style:(0,n.Tr)("width: "+100*o.value[t][a][l].length+"%;color:#000"),onClick:s=>i(e+" "+(0,w.R1)(Mt).LAMP_INDEX[l],c(t,a,l))},(0,n.v_)(o.value[t][a][l].length),15,Ks))),128))])]))),128))])]))),128)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)("表示する難易度が設定されていません")],64)),(0,s.bF)(Rs,{id:"song-list-modal",ref_key:"modal",ref:l},null,512)])}}});const Ss=(0,X.A)(Ps,[["__scopeId","data-v-19a777e6"]]);var Ns=Ss;const Os={id:"rank-graph"},$s={style:{width:"100%"}},Hs={class:"progress",style:{width:"100%",height:"1.8em"}},js={style:{width:"100%"}},Bs={style:{width:"30px"}},qs={class:"progress",style:{width:"100%",height:"1.8em"}},Us=["onClick"];var Ys=(0,s.pM)({__name:"RankGraph",props:{filtered_score:{},tables:{},checks:{}},setup(e){const t=oa(),a=e,l=(0,w.KR)(),o=(0,s.EW)(()=>r.value.map(e=>e.level_list.map(e=>Mt.RANK_TYPE.map(t=>a.filtered_score.filter(a=>a.clear_rank===t&&a.level===e).sort(Xt.cmp_title))))),r=(0,s.EW)(()=>h.filter_active_tables(a.checks,a.tables)),i=(e,t)=>l.value?.showModal(e,t),c=(e,t,a)=>o.value[e][t][a].sort(Xt.cmp_title).map(e=>e.title);return(e,a)=>{const u=(0,s.g2)("font-awesome-icon"),d=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("div",Os,[a[0]||(a[0]=(0,s.eW)(" 凡例 ",-1)),(0,s.Lk)("table",$s,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",Hs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).RANK_TYPE,e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:(0,n.C4)("progress-bar bg-"+e),role:"progressbar",style:(0,n.Tr)([{color:"#000"},"width: "+100/(0,w.R1)(Mt).RANK_TYPE.length+"%"])},[(0,s.Lk)("span",null,[(0,s.eW)((0,n.v_)(e)+" ",1),(0,w.R1)(t).filter.visible_rank.ranks[e]?(0,s.Q3)("",!0):(0,s.bo)(((0,s.uX)(),(0,s.Wv)(u,{key:0,icon:["fas","circle-exclamation"]},null,512)),[[d,"非表示中です"]])])],6))),128))])])]),a[1]||(a[1]=(0,s.Lk)("hr",null,null,-1)),r.value.length>0?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(r.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("h2",null,(0,n.v_)(e.name),1),(0,s.Lk)("table",js,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.level_list,(e,a)=>((0,s.uX)(),(0,s.CE)("tr",{key:a},[(0,s.Lk)("td",Bs,(0,n.v_)(e),1),(0,s.Lk)("td",qs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).RANK_TYPE,(l,r)=>((0,s.uX)(),(0,s.CE)("div",{key:l,class:(0,n.C4)("progress-bar bg-"+l),role:"progressbar",style:(0,n.Tr)("width: "+100*o.value[t][a][r].length+"%;color:#000"),onClick:s=>i(e+" "+l,c(t,a,r))},(0,n.v_)(o.value[t][a][r].length),15,Us))),128))])]))),128))])]))),128)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)(" 表示する難易度が設定されていません ")],64)),(0,s.bF)(Rs,{id:"song-list-modal",ref_key:"modal",ref:l},null,512)])}}});const Vs=(0,X.A)(Ys,[["__scopeId","data-v-7c2e23ee"]]);var Qs=Vs;const Gs={class:"align-items-center"},Js={class:"input-group"},zs={class:"input-group-prepend"},Zs={for:"max_length",class:"btn btn-info text-nowrap"};var en=(0,s.pM)({__name:"DisplaySongsLimiter",setup(e){const t=oa(),a=(0,s.EW)({get(){return t.filter.max_length},set(e){t.setLength(e)}});return(e,t)=>{const n=(0,s.g2)("font-awesome-icon"),o=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("div",Gs,[(0,s.Lk)("div",Js,[(0,s.Lk)("div",zs,[(0,s.bo)(((0,s.uX)(),(0,s.CE)("label",Zs,[t[1]||(t[1]=(0,s.eW)(" 表示曲数 ",-1)),(0,s.bF)(n,{icon:["fas","question-circle"]})])),[[o,"詳細表上に表示する曲数を制限します フィルタリングは全曲から行われます"]])]),(0,s.bo)((0,s.Lk)("input",{id:"max_length",type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),class:"form-control"},null,512),[[l.Jo,a.value]]),t[2]||(t[2]=(0,s.Lk)("div",{class:"input-group-append"},[(0,s.Lk)("label",{for:"max_length",class:"btn btn-info text-nowrap"},"曲")],-1))])])}}});const tn=en;var an=tn;const ln={id:"detail-columns",class:"form-group row align-items-center"},sn=["id","value"],nn=["for"];var on=(0,s.pM)({__name:"ColumnModal",props:{columns:{}},setup(e,{expose:t}){const a=(0,w.KR)(),o=e,r=(0,w.KR)(o.columns?.visible_columns()),i=(0,s.EW)(()=>Mt.DETAIL_COLUMNS.filter(e=>"title"!==e.key)),c=()=>a.value?.showModal(),u=()=>a.value?.closeModal();return(0,s.wB)(r,e=>o.columns?.import_columns(e)),t({showModal:c}),(e,t)=>((0,s.uX)(),(0,s.Wv)(we,{id:"column-modal",ref_key:"modal_base",ref:a},{header:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.Lk)("h2",null,"表示カラム設定",-1)])]),body:(0,s.k6)(()=>[(0,s.Lk)("div",ln,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.key,class:"btn col-sm-3 text-nowrap"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:e.key,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),value:e.key},null,8,sn),[[l.lH,r.value]]),(0,s.Lk)("label",{for:e.key},(0,n.v_)(e.name),9,nn)]))),128))]),t[2]||(t[2]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",{class:"btn",onClick:u},"閉じる")]),_:1},512))}});const rn=on;var cn=rn;const un={class:"filter"};var dn=(0,s.pM)({__name:"RecommendModal",setup(e,{expose:t}){const a=oa(),l=(0,w.KR)(),n=(0,s.EW)(()=>a.filter),o=()=>l.value?.showModal();return t({showModal:o}),(e,t)=>((0,s.uX)(),(0,s.Wv)(we,{id:"recommend-modal",ref_key:"modal_base",ref:l},{header:(0,s.k6)(()=>[...t[9]||(t[9]=[(0,s.Lk)("h2",null,"おすすめ設定",-1)])]),body:(0,s.k6)(()=>[(0,s.Lk)("div",un,[t[10]||(t[10]=(0,s.Lk)("h2",null,"目標から選ぶ",-1)),t[11]||(t[11]=(0,s.Lk)("h3",null,"更新狙い",-1)),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[0]||(t[0]=e=>n.value.for_score())}," スコア更新狙い "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[1]||(t[1]=e=>n.value.for_bp())}," BP更新狙い "),t[12]||(t[12]=(0,s.Lk)("h3",null,"スコアランク狙い",-1)),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[2]||(t[2]=e=>n.value.for_aaa())}," AAA狙い "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[3]||(t[3]=e=>n.value.for_aa())},"AA狙い"),t[13]||(t[13]=(0,s.Lk)("h3",null,"クリアランプ狙い",-1)),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[4]||(t[4]=e=>n.value.for_easy())}," Easy狙い "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[5]||(t[5]=e=>n.value.for_hard())}," Hard狙い "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[6]||(t[6]=e=>n.value.for_ex_hard())}," EXH狙い "),(0,s.Lk)("button",{class:"btn btn-success",onClick:t[7]||(t[7]=e=>n.value.for_full_combo())}," FC狙い "),t[14]||(t[14]=(0,s.Lk)("h3",null,"ランダムセレクト",-1)),(0,s.Lk)("button",{class:"btn btn-primary",onClick:t[8]||(t[8]=e=>n.value.for_random())}," ランダムセレクト ")])]),_:1},512))}});const _n=(0,X.A)(dn,[["__scopeId","data-v-2506c08d"]]);var vn=_n;const pn={id:"detail"},hn={class:"form-group row align-items-center"},bn={class:"table-wrapper"},kn={class:"score-table detail"},mn={class:"tbody"};var fn=(0,s.pM)({__name:"TheDetail",props:{user_id:{},sorted_song_list:{},date:{},filter:{}},setup(e){const t=L(),a=(0,w.KR)(),l=(0,w.KR)(),n=(0,w.KR)(),o=e,r=(0,w.EW)(()=>o.filter?.columns),i=(0,w.EW)(()=>t.accessToken),c=()=>a.value?.showModal(),u=()=>n.value?.showModal(),d=async e=>{let t=await g.fetch_score_log(o.user_id,e.sha256,i.value);l.value?.showModal(e,o.date,t.log)};return(t,o)=>((0,s.uX)(),(0,s.CE)("div",pn,[(0,s.Lk)("div",hn,[(0,s.bF)(an,{class:"col-sm-4"}),(0,s.Lk)("label",{class:"col-sm-2 btn btn-primary",onClick:c}," プリセット "),(0,s.Lk)("label",{class:"col-sm-2 btn btn-success",onClick:u}," 列設定 "),(0,s.Lk)("label",{class:"col-sm-2 btn btn-success",onClick:o[0]||(o[0]=t=>e.filter?.default())}," デフォルト "),(0,s.Lk)("label",{class:"col-sm-2 btn btn-success",onClick:o[1]||(o[1]=t=>e.filter?.for_recent())}," 直近の更新 "),(0,s.Lk)("label",{class:"col-sm-2 btn btn-success",onClick:o[2]||(o[2]=t=>e.filter?.for_rival())}," ライバル比較 ")]),o[3]||(o[3]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",bn,[(0,s.Lk)("div",kn,[(0,s.bF)(fa,{columns:(0,w.R1)(r)},null,8,["columns"]),(0,s.bF)(pa,{columns:(0,w.R1)(r)},null,8,["columns"]),(0,s.Lk)("div",mn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.sorted_song_list,e=>((0,s.uX)(),(0,s.Wv)(ta,{key:e.md5,song:e,columns:(0,w.R1)(r),percentile:!1,onShowModal:d},null,8,["song","columns"]))),128))])]),(0,s.bF)(xt,{ref_key:"song_modal",ref:l},null,512),(0,s.bF)(cn,{columns:(0,w.R1)(r),ref_key:"column_modal",ref:n},null,8,["columns"]),(0,s.bF)(vn,{ref_key:"recommend_modal",ref:a},null,512)])]))}});const yn=fn;var gn=yn;const Ln={id:"stat"},wn={class:"row"},En={class:"card"},Cn={class:"card-header"},An={class:"card-body"},Wn={class:"col-sm-3"},xn={class:"card"},Rn={class:"card-body"},Mn={class:"row"},Xn={class:"card"},Fn={class:"card-header"},Tn={class:"card-body"},Dn={class:"col-sm-2"},In={class:"card"},Kn={class:"card-body"},Pn={class:"row"},Sn={class:"col-sm-3"},Nn={class:"card"},On={class:"card-body"},$n={class:"col-sm-3"},Hn={class:"card"},jn={class:"card-body"},Bn={class:"row"},qn={class:"col-sm-3"},Un={class:"card"},Yn={class:"card-body"},Vn={class:"col-sm-3"},Qn={class:"card"},Gn={class:"card-body"},Jn={class:"row"},zn={class:"col-sm-3"},Zn={class:"card"},eo={class:"card-body"},to={class:"col-sm-3"},ao={class:"card"},lo={class:"card-body"};var so=(0,s.pM)({__name:"TheStat",props:{filtered_score:{}},setup(e){const t=e,a=(0,s.EW)(()=>Mt.LAMP_INDEX.map((e,a)=>t.filtered_score.filter(e=>e.clear_type===a).sort(Xt.cmp_title))),l=(0,s.EW)(()=>Mt.RANK_TYPE.map(e=>t.filtered_score.filter(t=>t.clear_rank===e).sort(Xt.cmp_title))),o=(0,s.EW)(()=>{let e=0;return t.filtered_score.filter(e=>0!==e.clear_type).forEach(t=>e+=t.min_bp),e}),r=(0,s.EW)(()=>{let e=0,a=t.filtered_score.filter(e=>0!==e.clear_type);return a.forEach(t=>e+=t.min_bp),(e/a.length).toFixed(3)}),i=(0,s.EW)(()=>{let e=0;return t.filtered_score.filter(e=>0!==e.clear_type).forEach(t=>e+=t.score),e}),c=(0,s.EW)(()=>{let e=0,a=t.filtered_score.filter(e=>0!==e.clear_type);return a.forEach(t=>e+=t.score),(e/a.length).toFixed(3)}),u=(0,s.EW)(()=>{let e=0;return t.filtered_score.filter(e=>0!==e.clear_type).forEach(t=>e+=t.score_rate()),e.toFixed(3)}),d=(0,s.EW)(()=>{let e=0,a=t.filtered_score.filter(e=>0!==e.clear_type);return a.forEach(t=>e+=t.score_rate()),(e/a.length).toFixed(3)});return(t,_)=>((0,s.uX)(),(0,s.CE)("div",Ln,[_[8]||(_[8]=(0,s.Lk)("h3",null,"クリアランプ分布",-1)),(0,s.Lk)("div",wn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).LAMP_INDEX,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"col-sm-3",key:e},[(0,s.Lk)("div",En,[(0,s.Lk)("div",Cn,(0,n.v_)(e),1),(0,s.Lk)("div",An,(0,n.v_)(a.value[t].length),1)])]))),128)),(0,s.Lk)("div",Wn,[(0,s.Lk)("div",xn,[_[0]||(_[0]=(0,s.Lk)("div",{class:"card-header"},"Sum",-1)),(0,s.Lk)("div",Rn,(0,n.v_)(e.filtered_score.length),1)])])]),_[9]||(_[9]=(0,s.Lk)("hr",null,null,-1)),_[10]||(_[10]=(0,s.Lk)("h3",null,"スコアランク分布",-1)),(0,s.Lk)("div",Mn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(Mt).RANK_TYPE,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"col-sm-2",key:e},[(0,s.Lk)("div",Xn,[(0,s.Lk)("div",Fn,(0,n.v_)(e),1),(0,s.Lk)("div",Tn,(0,n.v_)(l.value[t].length),1)])]))),128)),(0,s.Lk)("div",Dn,[(0,s.Lk)("div",In,[_[1]||(_[1]=(0,s.Lk)("div",{class:"card-header"},"Sum",-1)),(0,s.Lk)("div",Kn,(0,n.v_)(e.filtered_score.length),1)])])]),_[11]||(_[11]=(0,s.Lk)("hr",null,null,-1)),_[12]||(_[12]=(0,s.Lk)("h3",null,"BP状況",-1)),(0,s.Lk)("div",Pn,[(0,s.Lk)("div",Sn,[(0,s.Lk)("div",Nn,[_[2]||(_[2]=(0,s.Lk)("div",{class:"card-header"},"合計",-1)),(0,s.Lk)("div",On,(0,n.v_)(o.value),1)])]),(0,s.Lk)("div",$n,[(0,s.Lk)("div",Hn,[_[3]||(_[3]=(0,s.Lk)("div",{class:"card-header"},"平均",-1)),(0,s.Lk)("div",jn,(0,n.v_)(r.value),1)])])]),_[13]||(_[13]=(0,s.Lk)("hr",null,null,-1)),_[14]||(_[14]=(0,s.Lk)("h3",null,"スコア",-1)),(0,s.Lk)("div",Bn,[(0,s.Lk)("div",qn,[(0,s.Lk)("div",Un,[_[4]||(_[4]=(0,s.Lk)("div",{class:"card-header"},"合計",-1)),(0,s.Lk)("div",Yn,(0,n.v_)(i.value),1)])]),(0,s.Lk)("div",Vn,[(0,s.Lk)("div",Qn,[_[5]||(_[5]=(0,s.Lk)("div",{class:"card-header"},"平均",-1)),(0,s.Lk)("div",Gn,(0,n.v_)(c.value),1)])])]),_[15]||(_[15]=(0,s.Lk)("h3",null,"スコアレート",-1)),(0,s.Lk)("div",Jn,[(0,s.Lk)("div",zn,[(0,s.Lk)("div",Zn,[_[6]||(_[6]=(0,s.Lk)("div",{class:"card-header"},"合計",-1)),(0,s.Lk)("div",eo,(0,n.v_)(u.value),1)])]),(0,s.Lk)("div",to,[(0,s.Lk)("div",ao,[_[7]||(_[7]=(0,s.Lk)("div",{class:"card-header"},"平均",-1)),(0,s.Lk)("div",lo,(0,n.v_)(d.value),1)])])])]))}});const no=so;var oo=no;const ro={id:"score-table"},io={class:"row"},co={key:0},uo=["href"],_o={key:0},vo={key:1};var po=(0,s.pM)({__name:"ScoreViewer",props:{user_id:{},mode:{},rival_id:{}},setup(e){const t=L(),a=oa(),l=(0,E.lq)(),o=(0,E.rd)();(0,s.sV)(()=>{g.fetch_tables(t.accessToken).then(e=>p.value=e),g.fetch_songs(t.accessToken).then(e=>b.value=e),$(_.user_id),O(_.rival_id)});const r=(0,w.KR)(),i=(0,w.KR)(),c=(0,w.KR)(),d=(0,w.KR)(),_=e,p=(0,w.KR)(new v([])),b=(0,w.KR)(),m=(0,w.KR)(),f=(0,w.KR)(),y=(0,w.KR)((()=>{let e=new Date;return e.setDate(e.getDate()+1),e.setHours(0,0,0,0),e})()),C=(0,w.KR)(new Date),A=(0,w.KR)(""),W=(0,w.KR)({user_id:0,rival_id:0,date:""}),x=(0,s.EW)(()=>p.value.level_list()),R=(0,s.EW)(()=>!!p.value),M=(0,s.EW)(()=>!!m.value),X=(0,s.EW)(()=>!!b.value),F=(0,s.EW)(()=>!!f.value),T=(0,s.EW)(()=>R.value&&X.value&&M.value),D=(0,s.EW)(()=>k.format(y.value)),I=(0,s.EW)(()=>M.value?m.value.name:""),K=(0,s.EW)(()=>M.value?"https://twitter.com/intent/tweet?url="+window.location.host+"/%23/view?user_id="+m.value.user_id:""),P=(0,s.EW)(()=>!h.contains_active(a.checked_tables,p.value)),S=(0,s.EW)(()=>{if(!T.value)return[];let e=[],t={};for(let l=0;l<p.value.tables.length;l+=1){const s=p.value.tables[l];for(const l in s.levels){if(!h.is_active(a.checked_tables,s,l))continue;const n=s.levels[l];if(n)for(const s of n){if(t[s])continue;t[s]=!0;let n=new Xt;n.set_level(l),n.init_score(m.value.get_score(s)),n.init_song(b.value.get_score(s),s),F.value&&n.init_rival_score(f.value?.get_score(s)),a.filter.apply(n,F.value)&&e.push(n)}}}return e}),N=(0,s.EW)(()=>{let e=S.value;return e.sort((e,t)=>Xt.cmp(e,t,a.filter.sort_key,a.filter.sort_desc,x.value)).slice(0,a.filter.max_length||e.length)}),O=e=>{(0,u.debug)(W.value,e),e>0&&W.value.rival_id!==e?g.fetch_score(new Date(0),C.value,e,t.accessToken).then(t=>{f.value=null,f.value=t,W.value.rival_id=e}):(f.value=null,W.value.rival_id=0)},$=e=>{(0,u.debug)(_.user_id),e?W.value.user_id===e&&W.value.date===D.value||((0,u.debug)("fetch!"),A.value="読込中...",g.fetch_score(new Date(0),y.value,e,t.accessToken).then(t=>{m.value=t,A.value=M.value?"":"読み込み失敗",W.value.user_id=e,W.value.date=D.value})):A.value="プレイヤーを選択してください"},H=()=>r.value?.showModal(),j=()=>i.value?.showModal(),B=async(e,t)=>{i.value?.closeModal();let a=Object.assign({},l.query);a.user_id=""+e,t.setDate(t.getDate()+1),t.setHours(0,0,0,0),y.value=t,(0,u.debug)(a),await o.push({query:a}),$(e)},q=()=>c.value?.showModal(),U=()=>d.value?.showModal(),Y=async(e,t)=>{d.value?.closeModal();let a=Object.assign({},l.query);a.rival_id=""+e,t.setDate(t.getDate()+1),t.setHours(0,0,0,0),C.value=t,(0,u.debug)(a),await o.push({query:a}),O(e)};return(t,l)=>{const o=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("section",ro,[(0,s.Lk)("div",io,[(0,s.Lk)("div",{class:"col-sm-3 btn btn-secondary",onClick:j}," プレイヤー選択 "),(0,s.Lk)("div",{class:"col-sm-3 btn btn-secondary",onClick:q}," 表示曲設定 "),P.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"col-sm-3 btn btn-danger",onClick:H}," 難易度選択(未) ")):((0,s.uX)(),(0,s.CE)("div",{key:1,class:"col-sm-3 btn btn-secondary",onClick:H}," 難易度選択 ")),(0,s.Lk)("div",{class:"col-sm-3 btn btn-secondary",onClick:U}," ライバル選択 ")]),l[0]||(l[0]=(0,s.Lk)("hr",null,null,-1)),T.value?((0,s.uX)(),(0,s.CE)("div",co,[(0,s.Lk)("div",null,[(0,s.Lk)("h2",null,[(0,s.eW)((0,n.v_)(I.value)+"のデータ ",1),(0,s.Lk)("a",{href:K.value,target:"_blank"},[(0,s.bF)(o,{icon:["fab","twitter-square"]})],8,uo)]),F.value?((0,s.uX)(),(0,s.CE)("h3",_o,"ライバル表示: "+(0,n.v_)(f.value.name),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,["detail"===e.mode?((0,s.uX)(),(0,s.Wv)(gn,{key:0,sorted_song_list:N.value,user_id:e.user_id,date:D.value,filter:(0,w.R1)(a).filter},null,8,["sorted_song_list","user_id","date","filter"])):(0,s.Q3)("",!0),"lamp"===e.mode?((0,s.uX)(),(0,s.Wv)(Ns,{key:1,filtered_score:S.value,tables:p.value,checks:(0,w.R1)(a).checked_tables},null,8,["filtered_score","tables","checks"])):(0,s.Q3)("",!0),"rank"===e.mode?((0,s.uX)(),(0,s.Wv)(Qs,{key:2,filtered_score:S.value,tables:p.value,checks:(0,w.R1)(a).checked_tables},null,8,["filtered_score","tables","checks"])):(0,s.Q3)("",!0),"stat"===e.mode?((0,s.uX)(),(0,s.Wv)(oo,{key:3,filtered_score:S.value},null,8,["filtered_score"])):(0,s.Q3)("",!0)])])):((0,s.uX)(),(0,s.CE)("p",vo,(0,n.v_)(A.value),1)),(0,s.bF)(Bl,{ref_key:"user_modal",ref:i,user_id:e.user_id,onSetUser:B},null,8,["user_id"]),R.value?((0,s.uX)(),(0,s.Wv)(Sl,{key:2,ref_key:"tables_modal",ref:r,tables:p.value,checks:(0,w.R1)(a).checked_tables},null,8,["tables","checks"])):(0,s.Q3)("",!0),(0,s.bF)(Bl,{ref_key:"rival_modal",ref:d,user_id:e.rival_id,onSetUser:Y,rival_mode:!0},null,8,["user_id"]),(0,s.bF)(As,{ref_key:"filter_modal",ref:c,rival_mode:F.value},null,8,["rival_mode"])])}}});const ho=(0,X.A)(po,[["__scopeId","data-v-fc5edb02"]]);var bo=ho;const ko={key:0,style:{"padding-top":"20px"}},mo={class:"table-wrapper"},fo={class:"score-table"},yo={class:"tbody"},go={class:"th"},Lo={class:"th"},wo={class:"th"},Eo={class:"th"},Co={class:"th"},Ao={class:"th"},Wo={key:1};var xo=(0,s.pM)({__name:"SongRanking",props:{sha256:{}},setup(e){const t=L(),a=e,l=(0,w.KR)();return(0,s.KC)(()=>g.fetch_ranking(t.accessToken,a.sha256).then(e=>l.value=""===e.song.sha256?null:e)),(e,t)=>{const a=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[l.value?((0,s.uX)(),(0,s.CE)("div",ko,[(0,s.Lk)("div",null,[(0,s.Lk)("div",null,(0,n.v_)(l.value.song.title),1),(0,s.Lk)("div",null,(0,n.v_)(l.value.song.notes)+" notes",1)]),(0,s.Lk)("div",mo,[(0,s.Lk)("div",fo,[t[0]||(t[0]=(0,s.Fv)('<div class="thead"><div class="tr"><div class="th sort_inactive">User</div><div class="th score sort_inactive">Score</div><div class="th bp sort_inactive">BP</div><div class="th combo sort_inactive">Combo</div><div class="th clear sort_inactive">Clear</div><div class="th date sort_inactive">Date</div></div></div>',1)),(0,s.Lk)("div",yo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value.score,(t,l)=>((0,s.uX)(),(0,s.CE)("div",{class:"tr",key:l},[(0,s.Lk)("div",go,[(0,s.bF)(a,{to:{path:"view",query:Object.assign({},e.$route.query,{user_id:l})}},{default:(0,s.k6)(()=>[(0,s.eW)((0,n.v_)(t[0]),1)]),_:2},1032,["to"])]),(0,s.Lk)("div",Lo,(0,n.v_)(t[1].score?t[1].score.current:"-"),1),(0,s.Lk)("div",wo,(0,n.v_)(t[1].min_bp?t[1].min_bp.current:"-"),1),(0,s.Lk)("div",Eo,(0,n.v_)(t[1].max_combo),1),(0,s.Lk)("div",Co,(0,n.v_)(t[1].clear_type?(0,w.R1)(Mt).LAMP_TYPE[10-t[1].clear_type.current]:(0,w.R1)(Mt).LAMP_TYPE[10]),1),(0,s.Lk)("div",Ao,(0,n.v_)(t[1].updated_at.split("T")[0]),1)]))),128))])])]),t[1]||(t[1]=(0,s.Lk)("div",null,null,-1))])):((0,s.uX)(),(0,s.CE)("div",Wo," Song is not selected. "))])}}});const Ro=xo;var Mo=Ro;const Xo={id:"release-note"};var Fo=(0,s.pM)({__name:"ReleaseNote",setup(e){const t=(0,w.KR)(["2022/06/23 曲詳細モーダルに遷移グラフを追加","2022/05/02 スコアランキングの表示を改善","2022/04/27 スコア画面のレイアウトを調整","2022/04/25 詳細画面にスコアランク, 細分化ランクを追加","2022/03/08 累積プレイ情報画面を追加","2021/07/10 IR機能の追加","2021/06/08 ライバルとのスコア比較機能を追加","2021/06/01 直近で更新した曲リストの表示機能を追加","2021/03/17 ホーム画面のレイアウトを調整","2021/03/05 おすすめ譜面表を追加","2021/02/11 ユーザーリストの追加","2021/01/20 詳細表示の表示を調整 モバイル版に対応","2021/01/13 グラフエリアのクリックで対象曲リストを表示する","2021/01/07 フィルターの状態の保存機能を実装","2021/01/06 IRへのリンクを追加","2021/01/02 名前登録、Twitter共有実装","2021/01/01 ランダムセレクト実装","2020/12/30 ログイン機能実装"]);return(e,a)=>((0,s.uX)(),(0,s.CE)("div",Xo,[a[0]||(a[0]=(0,s.Lk)("h2",null,"更新履歴",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,n.v_)(e),1))),128))])]))}});const To=(0,X.A)(Fo,[["__scopeId","data-v-71826816"]]);var Do=To;const Io={id:"home",class:"container"},Ko={class:"row"},Po={class:"col-lg-3 panel"},So={class:"col-lg-3 panel"},No={class:"col-lg-3 panel"},Oo={class:"col-lg-3 panel"},$o={class:"col-lg-3 panel"},Ho={key:0,class:"col-lg-3 panel"},jo={key:1,class:"col-lg-3 panel"},Bo={key:2,class:"col-lg-3 panel"},qo={key:3,class:"col-lg-3 panel"},Uo={key:4,class:"col-lg-3 panel"},Yo={key:5,class:"col-lg-3 panel"},Vo=["href"],Qo={class:"message"},Go={class:"message"};var Jo=(0,s.pM)({__name:"TheHome",props:{is_login:{type:Boolean}},emits:["handleSignOut"],setup(e,{emit:t}){const a=L(),n=t,o=(0,s.EW)(()=>a.userInfo?a.userInfo.user_id:1),r=()=>{let e="746230605395-g23hslpeod50u4h99gmrfg7ulref0a3u.apps.googleusercontent.com",t="https://bms.katand.net/oauth";return"https://accounts.google.com/o/oauth2/auth?include_granted_scopes=true&redirect_uri="+t+"&scope=openid%20email%20profile&response_type=code&approval_prompt=force&access_type=offline&client_id="+e},i=async()=>{n("handleSignOut")};return(t,a)=>{const n=(0,s.g2)("font-awesome-icon"),c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("section",Io,[a[43]||(a[43]=(0,s.Lk)("div",{class:"jumbotron"},[(0,s.Lk)("div",{class:"container"},[(0,s.Lk)("h1",null,"Beatoraja Play Recommend"),(0,s.Lk)("p",null,[(0,s.eW)(" Beatorajaのプレイデータ保管/閲覧サービスです。"),(0,s.Lk)("br"),(0,s.eW)(" スコアログのデータから、更新できそうな譜面をピックアップできます。 ")])])],-1)),(0,s.Lk)("div",Ko,[(0,s.Lk)("div",Po,[(0,s.Lk)("h4",null,[(0,s.bF)(c,{class:"text-dark px-2",to:"/"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{icon:["fas","home"]}),a[0]||(a[0]=(0,s.eW)(" ホーム ",-1))]),_:1})]),a[1]||(a[1]=(0,s.eW)(" この画面です。 ",-1))]),(0,s.Lk)("div",So,[(0,s.Lk)("h4",null,[(0,s.bF)(c,{class:"text-dark px-2",to:{path:"/view",query:Object.assign({},t.$route.query,{user_id:o.value})}},{default:(0,s.k6)(()=>[(0,s.bF)(n,{icon:["fas","cubes"]}),a[2]||(a[2]=(0,s.eW)(" スコアデータ閲覧 ",-1))]),_:1},8,["to"])]),a[3]||(a[3]=(0,s.eW)(" ユーザIDを指定して",-1)),a[4]||(a[4]=(0,s.Lk)("br",null,null,-1)),a[5]||(a[5]=(0,s.eW)("スコアを閲覧できます。 ",-1))]),(0,s.Lk)("div",No,[(0,s.Lk)("h4",null,[(0,s.bF)(c,{class:"text-dark px-2",to:{path:"/view/lamp",query:Object.assign({},t.$route.query,{user_id:o.value})}},{default:(0,s.k6)(()=>[(0,s.bF)(n,{icon:["fas","lightbulb"]}),a[6]||(a[6]=(0,s.eW)(" クリアランプ表 ",-1))]),_:1},8,["to"])]),a[7]||(a[7]=(0,s.eW)(" クリアランプ状況の一覧を",-1)),a[8]||(a[8]=(0,s.Lk)("br",null,null,-1)),a[9]||(a[9]=(0,s.eW)("グラフで確認できます。 ",-1))]),(0,s.Lk)("div",Oo,[(0,s.Lk)("h4",null,[(0,s.bF)(c,{class:"text-dark px-2",to:{path:"/view/rank",query:Object.assign({},t.$route.query,{user_id:o.value})}},{default:(0,s.k6)(()=>[(0,s.bF)(n,{icon:["fas","chart-bar"]}),a[10]||(a[10]=(0,s.eW)(" スコアランク表 ",-1))]),_:1},8,["to"])]),a[11]||(a[11]=(0,s.eW)(" スコアランク状況の一覧を",-1)),a[12]||(a[12]=(0,s.Lk)("br",null,null,-1)),a[13]||(a[13]=(0,s.eW)("グラフで確認できます。 ",-1))]),(0,s.Lk)("div",$o,[(0,s.Lk)("h4",null,[(0,s.bF)(c,{class:"text-dark px-2",to:{path:"/view/stat",query:Object.assign({},t.$route.query,{user_id:o.value})}},{default:(0,s.k6)(()=>[(0,s.bF)(n,{icon:["fas","wrench"]}),a[14]||(a[14]=(0,s.eW)(" 統計 ",-1))]),_:1},8,["to"])]),a[15]||(a[15]=(0,s.eW)(" 統計をまとめて",-1)),a[16]||(a[16]=(0,s.Lk)("br",null,null,-1)),a[17]||(a[17]=(0,s.eW)("確認できます。 ",-1))]),e.is_login?((0,s.uX)(),(0,s.CE)("div",Ho,[(0,s.Lk)("h4",null,[(0,s.bF)(c,{class:"text-dark px-2",to:"/stats?user_id="+o.value},{default:(0,s.k6)(()=>[(0,s.bF)(n,{icon:["fas","wrench"]}),a[18]||(a[18]=(0,s.eW)(" プレイ履歴 ",-1))]),_:1},8,["to"])]),a[19]||(a[19]=(0,s.eW)(" 今までのプレイ履歴を",-1)),a[20]||(a[20]=(0,s.Lk)("br",null,null,-1)),a[21]||(a[21]=(0,s.eW)("確認できます。 ",-1))])):(0,s.Q3)("",!0),e.is_login?((0,s.uX)(),(0,s.CE)("div",jo,[(0,s.Lk)("h4",null,[(0,s.bF)(c,{class:"text-dark px-2",to:"/mypage"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{icon:["fas","pencil-alt"]}),a[22]||(a[22]=(0,s.eW)(" マイページ ",-1))]),_:1})]),a[23]||(a[23]=(0,s.eW)(" スコアを登録したり、",-1)),a[24]||(a[24]=(0,s.Lk)("br",null,null,-1)),a[25]||(a[25]=(0,s.eW)("プロフィールが編集できます。 ",-1))])):(0,s.Q3)("",!0),e.is_login?((0,s.uX)(),(0,s.CE)("div",Bo,[(0,s.Lk)("h4",null,[(0,s.bF)(c,{class:"text-dark px-2",to:"/table?user_id="+o.value},{default:(0,s.k6)(()=>[(0,s.bF)(n,{icon:["fas","thumbs-up"]}),a[26]||(a[26]=(0,s.eW)(" おすすめ表 ",-1))]),_:1},8,["to"])]),a[27]||(a[27]=(0,s.eW)(" 難易度表を指定して",-1)),a[28]||(a[28]=(0,s.Lk)("br",null,null,-1)),a[29]||(a[29]=(0,s.eW)("おすすめ譜面の表を作ります。 ",-1))])):(0,s.Q3)("",!0),e.is_login?((0,s.uX)(),(0,s.CE)("div",qo,[(0,s.Lk)("h4",null,[(0,s.bF)(c,{class:"text-dark px-2",to:"/table-user"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{icon:["fas","table"]}),a[30]||(a[30]=(0,s.eW)(" 難易度表データ ",-1))]),_:1})]),a[31]||(a[31]=(0,s.eW)(" 難易度表1つ分の",-1)),a[32]||(a[32]=(0,s.Lk)("br",null,null,-1)),a[33]||(a[33]=(0,s.eW)("ユーザーデータを表示します。 ",-1))])):(0,s.Q3)("",!0),e.is_login?((0,s.uX)(),(0,s.CE)("div",Uo,[(0,s.Lk)("h4",null,[(0,s.Lk)("a",{class:"text-dark px-3",href:"javascript:void(0);",onClick:(0,l.D$)(i,["prevent"])},[(0,s.bF)(n,{icon:["fas","sign-out-alt"]}),a[34]||(a[34]=(0,s.eW)(" ログアウト ",-1))])]),a[35]||(a[35]=(0,s.eW)(" ログアウトします。 ",-1))])):(0,s.Q3)("",!0),e.is_login?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Yo,[(0,s.Lk)("h4",null,[(0,s.Lk)("a",{class:"text-dark",href:r()},[(0,s.bF)(n,{icon:["fas","sign-in-alt"]}),a[36]||(a[36]=(0,s.eW)(" 登録/ログイン ",-1))],8,Vo)]),a[37]||(a[37]=(0,s.eW)(" ログインします。",-1)),a[38]||(a[38]=(0,s.Lk)("br",null,null,-1)),a[39]||(a[39]=(0,s.eW)("Google OAuthを使用します。 ",-1))]))]),a[44]||(a[44]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",Qo,[a[41]||(a[41]=(0,s.Lk)("h2",null,"お知らせ",-1)),a[42]||(a[42]=(0,s.Lk)("p",null,[(0,s.eW)(" Discordサーバーができました。 "),(0,s.Lk)("a",{href:"https://discord.com/invite/Bx9YMgswDc",target:"_blank"},"こちら"),(0,s.eW)("からどうぞ ")],-1)),(0,s.Lk)("p",null,[(0,s.bF)(n,{icon:["fas","wrench"]}),a[40]||(a[40]=(0,s.eW)(" がついている項目については製作中/不安定機能です。正常な動作が行えないか、動作が制限されています。 ",-1))])]),(0,s.Lk)("div",Go,[(0,s.bF)(Do)])])}}});const zo=(0,X.A)(Jo,[["__scopeId","data-v-519c2c74"]]);var Zo=zo;a(116),a(3579),a(8237),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const er=e=>e<0||2147483647===e?"-":e.toLocaleString(),tr=Mt.LAMP_INDEX.indexOf("Hard"),ar=Mt.LAMP_INDEX.indexOf("Failed"),lr=Mt.LAMP_INDEX.indexOf("Easy"),sr=[...Mt.LAMP_INDEX].reverse(),nr=(()=>{const e={};return Mt.LAMP_INDEX.forEach((t,a)=>{e[t]=a}),e})(),or=Mt.RANK_TYPE.filter(e=>"Max"!==e),rr=[...or].reverse(),ir=10,cr=rr.length*ir+1,ur=cr-1,dr=Mt.RANK_RATE_BY_9.slice(1),_r=[.3,.45,.6,.8,1],vr=dr.map((e,t)=>{const a=e/9*100,l=0===t?100:dr[t-1]/9*100;return{lower:a,upper:l}}),pr=[...vr].reverse(),hr=(cr-1)/cr*100,br=(()=>{const e=rr.length,t=rr.map((t,a)=>({label:t,left:`${(hr*(a/e)).toFixed(3)}%`}));return t.push({label:"Max",left:"100%"}),t})(),kr=e=>e&&e.getFullYear()>2e3,mr=e=>Math.max(0,Math.min(100,e)),fr=e=>e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),yr=e=>{const t=parseFloat(e.replace(/[^0-9.]/g,""));return Number.isFinite(t)?t:0},gr=(e,t)=>{let a=0,l=e.length;while(a<l){const s=Math.floor((a+l)/2);e[s]<t?a=s+1:l=s}return a},Lr=(e,t)=>{if(0===e.length)return 0;if(1===e.length)return e[0];const a=(e.length-1)*t,l=Math.floor(a),s=a-l,n=e[Math.min(e.length-1,l+1)];return e[l]+(n-e[l])*s},wr=(e,t,a)=>{if(!e||!t||!a)return[];const l={},s=[],n=a.levels;for(const o in n){const a=n[o];if(a)for(const n of a){if(l[n])continue;l[n]=!0;const a=new Xt;a.set_level(o),a.init_score(e.get_score(n)),a.init_song(t.get_score(n),n),s.push(a)}}return s.sort(Xt.cmp_title)},Er=(e,t,a,l,s)=>{const n=t.trim().toLowerCase();return e.filter(e=>!(n&&!e.title.toLowerCase().includes(n))&&("hard"===a?e.clear_type>=l:"uncleared"!==a||e.clear_type<=s))},Cr=e=>{const t=e.length,a=e.filter(e=>0!==e.clear_type),l=a.length,s=a.reduce((e,t)=>e+mr(t.score_rate()),0),n=fr(s),o=Math.round(100*t).toLocaleString(),r=(()=>{if(0===t)return 0;const e=a.filter(e=>e.total_notes>0&&e.min_bp>=0);if(0===e.length)return 0;const l=e.reduce((e,t)=>{const a=Math.max(0,(t.total_notes-3*t.min_bp)/t.total_notes);return e+100*a**2},0);return Math.max(0,l)})(),i=fr(r),c=Math.round(100*t).toLocaleString();return[{label:"プレイ済み譜面数",value:`${l.toLocaleString()}/${t.toLocaleString()}`},{label:"スコア頑張り度",value:n,tooltip:`満点 ${o} | 計算式: スコアレートの合計`},{label:"クリア頑張り度",value:i,tooltip:`満点 ${c} | 計算式: 100*((ノート数-ミス数*3)/ノート数)^2、0未満は0`}]},Ar=e=>{const t={};return e.forEach(e=>{0!==e.clear_type&&(t[e.level]=(t[e.level]||0)+mr(e.score_rate()))}),t},Wr=e=>{const t={};return e.forEach(e=>{0!==e.clear_type&&(t[e.level]=(t[e.level]||0)+1)}),t},xr=e=>{const t={};return e.forEach(e=>{if(0===e.clear_type||e.total_notes<=0||e.min_bp<0)return;const a=Math.max(0,(e.total_notes-3*e.min_bp)/e.total_notes),l=100*a**2;t[e.level]=(t[e.level]||0)+l}),t},Rr=e=>{const t={};return e.forEach(e=>{0===e.clear_type||e.total_notes<=0||e.min_bp<0||(t[e.level]=(t[e.level]||0)+1)}),t},Mr=(e,t)=>{const a=new Date;a.setDate(a.getDate()-30),a.setHours(0,0,0,0);const l=new Map;e.forEach(e=>{l.has(e.level)||l.set(e.level,[]),l.get(e.level)?.push(e.clear_type)});const s=new Map;l.forEach((e,t)=>{s.set(t,[...e].sort((e,t)=>e-t))});const n=new Map,o=[];e.filter(e=>e.clear_type>=t).filter(e=>kr(e.clear_updated_at)&&e.clear_updated_at>=a).forEach(e=>{const t=s.get(e.level)||[e.clear_type],a=t.length,l=gr(t,e.clear_type),r=0===a?0:l/a,i=yr(e.level),c=e.clear_type,u={title:e.title,level:e.level,rate:r,levelValue:i,lamp:Mt.LAMP_INDEX[c],lampIndex:c,updatedAt:e.clear_updated_at.getTime(),updatedLabel:kr(e.clear_updated_at)?k.format(e.clear_updated_at):"-"};o.push(u);const d=n.get(c);d?(u.rate>d.rate||u.rate===d.rate&&(u.levelValue>d.levelValue||u.levelValue===d.levelValue&&u.updatedAt>d.updatedAt))&&n.set(c,u):n.set(c,u)});const r=Array.from(n.values()),i=e=>`${e.title}__${e.level}__${e.lampIndex}__${e.updatedAt}`,c=new Set(r.map(i)),u=o.filter(e=>!c.has(i(e))).sort((e,t)=>t.rate!==e.rate?t.rate-e.rate:t.levelValue!==e.levelValue?t.levelValue-e.levelValue:t.updatedAt-e.updatedAt),d=[...r];for(const _ of u){if(d.length>=5)break;d.push(_)}return d.sort((e,t)=>t.lampIndex-e.lampIndex).map(({title:e,level:t,lamp:a,updatedLabel:l})=>({title:e,level:t,lamp:a,updatedLabel:l}))},Xr=e=>[...e].sort((e,t)=>t.updated_at.getTime()-e.updated_at.getTime()).map(e=>({level:e.level,title:e.title,titleWrapped:e.title.replace(/([/\-→（）()[\]])/g,"$1​"),lamp:Mt.LAMP_INDEX[e.clear_type],rate:`${mr(e.score_rate()).toFixed(2)}%`,miss:er(e.min_bp),last:kr(e.updated_at)?k.format(e.updated_at):"-"})),Fr=(e,t)=>{const a=new Map;return t.forEach(e=>a.set(e,Mt.LAMP_INDEX.map(()=>0))),e.forEach(e=>{a.has(e.level)||a.set(e.level,Mt.LAMP_INDEX.map(()=>0));const t=a.get(e.level);t&&void 0!==t[e.clear_type]&&(t[e.clear_type]+=1)}),Array.from(a.entries()).map(([e,t])=>({level:e,counts:t,total:Math.max(t.reduce((e,t)=>e+t,0),1)}))},Tr=(e,t)=>{const a=new Map;return t.forEach(e=>a.set(e,Array.from({length:cr},()=>0))),e.forEach(e=>{if(0===e.clear_type||0===e.total_notes)return;a.has(e.level)||a.set(e.level,Array.from({length:cr},()=>0));const t=a.get(e.level);if(!t)return;const l=mr(e.score_rate());if(l>=100)return void(t[ur]+=1);const s=Math.max(0,vr.findIndex(e=>l>=e.lower)),n=vr[s],o=Math.max(n.upper-n.lower,0),r=0===o?0:l-n.lower,i=0===o?0:Math.min(ir-1,Math.floor(r/o*ir)),c=rr.length-1-s,u=c*ir+i;t[u]+=1}),Array.from(a.entries()).map(([e,t])=>{const a=t.filter(e=>e>0),l=[...a].sort((e,t)=>e-t),s=[.2,.4,.6,.8].map(e=>Lr(l,e)),n=e=>{if(e<=0)return 0;let t=s.findIndex(t=>e<=t);return-1===t&&(t=s.length),_r[t]},o=[],r=e=>{if(e===ur)return{start:100,end:100};const t=Math.min(rr.length-1,Math.floor(e/ir)),a=pr[t],l=(a.upper-a.lower)/ir,s=e%ir;return{start:a.lower+l*s,end:a.lower+l*(s+1)}};let i=0;while(i<t.length){if(0===t[i]){let e=i;while(e<t.length&&0===t[e])e+=1;const a=r(i),l=r(e-1);o.push({len:e-i,count:0,alpha:0,start:i,end:e-1,startPercent:a.start,endPercent:l.end}),i=e;continue}const e=r(i),a=t[i],l=i===ur?"Max":rr[Math.min(rr.length-1,Math.floor(i/ir))];o.push({len:1,count:a,alpha:n(a),start:i,end:i,rank:l,startPercent:e.start,endPercent:e.end}),i+=1}return{level:e,segments:o}})},Dr=e=>{const t=e.map(e=>e.updated_at).filter(e=>kr(e)).sort((e,t)=>t.getTime()-e.getTime());return 0===t.length?"-":k.format(t[0])},Ir=e=>{try{const t=document.createElement("textarea");return t.value=e,t.setAttribute("readonly",""),t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),!0}catch(t){return!1}},Kr=async e=>{try{if(navigator.clipboard?.writeText)return await navigator.clipboard.writeText(e),!0}catch(t){return Ir(e)}return Ir(e)};a(4603),a(7566),a(8721);const Pr=e=>{if(Array.isArray(e))return Pr(e[0]);if("number"===typeof e&&Number.isFinite(e))return e>0?e:0;if("string"===typeof e){const t=parseInt(e,10);return Number.isFinite(t)&&t>0?t:0}return 0},Sr=(e,t)=>{const a=Pr(e.params?.user_id);if(a>0)return a;const l=Pr(e.query?.user_id);return l>0?l:t},Nr=e=>Pr(e.query?.table_id),Or=(e,t,a)=>{const l={state:t.state||"main"};t.tableId&&t.tableId>0&&(l.table_id=String(t.tableId));const s=e.resolve({path:`/table-user/${t.userId}`,query:l});return new URL(s.href,a).toString()},$r=()=>{const e=new Date;return e.setDate(e.getDate()+1),e.setHours(0,0,0,0),e},Hr=(e,t)=>{const a=Math.max(e-t.base,200),l=Math.max(t.minRows,Math.min(t.maxRows,Math.floor(a/t.rowHeight)));return l},jr={class:"hero"},Br={class:"sub"},qr={class:"hero-meta"},Ur=["value"],Yr=["value"],Vr={class:"hero-actions"},Qr=["disabled"];var Gr=(0,s.pM)({__name:"DifficultyTableUserHeader",props:{selectedTableName:{},userName:{},userId:{},lastUpdated:{},tableOptions:{},selectedTableId:{},isLoading:{type:Boolean}},emits:["update:selectedTableId","changeTable","shareLink"],setup(e,{emit:t}){const a=t,l=e=>{const t=e.target,l=parseInt(t.value,10);a("update:selectedTableId",Number.isFinite(l)?l:0),a("changeTable")};return(t,o)=>{const r=(0,s.g2)("font-awesome-icon"),i=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("header",jr,[(0,s.Lk)("div",null,[o[2]||(o[2]=(0,s.Lk)("div",{class:"hero-badge"},"Difficulty Table",-1)),(0,s.Lk)("h2",null,"難易度表: "+(0,n.v_)(e.selectedTableName),1),(0,s.Lk)("p",Br," ユーザー: "+(0,n.v_)(e.userName||e.userId)+" | 更新日: "+(0,n.v_)(e.lastUpdated),1),(0,s.Lk)("div",qr,[o[1]||(o[1]=(0,s.Lk)("label",{class:"meta-label",for:"table-select"},"難易度表",-1)),(0,s.Lk)("select",{id:"table-select",class:"form-control form-control-sm",value:e.selectedTableId,onChange:l},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.tableOptions,e=>((0,s.uX)(),(0,s.CE)("option",{key:e.name,value:e.id},(0,n.v_)(e.name),9,Yr))),128))],40,Ur)])]),(0,s.Lk)("div",Vr,[(0,s.bo)(((0,s.uX)(),(0,s.CE)("button",{class:"btn btn-outline-dark btn-sm",disabled:e.isLoading||e.userId<=0,onClick:o[0]||(o[0]=e=>a("shareLink"))},[(0,s.bF)(r,{icon:["fas","copy"]}),o[3]||(o[3]=(0,s.eW)(" 共有リンク ",-1))],8,Qr)),[[i,{content:"リンクをコピー",delay:{show:0,hide:0}}]])])])}}});const Jr=(0,X.A)(Gr,[["__scopeId","data-v-091c8af6"]]);var zr=Jr;const Zr={class:"panel-grid"},ei={class:"panel-box"},ti={class:"lamp-level-list"},ai={class:"lamp-level-name"},li=["aria-label"],si=["title"],ni={class:"panel-box"},oi={key:0,class:"rate-summary"},ri={class:"rate-header"},ii={class:"rate-name"},ci=["aria-label"],ui={key:1,class:"empty-state"};var di=(0,s.pM)({__name:"DifficultyTableUserDistributions",props:{tableSongs:{},baseLevels:{}},setup(e){const t=e,a=(0,s.EW)(()=>Fr(t.tableSongs,t.baseLevels)),l=(0,s.EW)(()=>Tr(t.tableSongs,t.baseLevels)),o=(0,s.EW)(()=>Ar(t.tableSongs)),r=(0,s.EW)(()=>Wr(t.tableSongs)),i=(0,s.EW)(()=>xr(t.tableSongs)),c=(0,s.EW)(()=>Rr(t.tableSongs));return(e,t)=>{const u=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("section",Zr,[(0,s.Lk)("div",ei,[t[0]||(t[0]=(0,s.Lk)("h3",null,"ランプ分布",-1)),t[1]||(t[1]=(0,s.Lk)("div",{class:"lamp-header"},[(0,s.Lk)("span",null,"Level"),(0,s.Lk)("span",null,"0%"),(0,s.Lk)("span",null,"50%"),(0,s.Lk)("span",null,"100%")],-1)),(0,s.Lk)("div",ti,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.level,class:"lamp-level-row"},[(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",ai,[(0,s.eW)((0,n.v_)(e.level),1)])),[[u,{content:`クリア頑張り度 合計 ${(0,w.R1)(fr)(i.value[e.level]||0)} / 平均 ${(0,w.R1)(fr)((i.value[e.level]||0)/Math.max(1,c.value[e.level]||0))}`,delay:{show:0,hide:0}}]]),(0,s.Lk)("div",{class:"lamp-stack",role:"img","aria-label":`ランプ分布 ${e.level}`},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(sr),t=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,n.C4)(["lamp-segment",`bg-${t}`]),style:(0,n.Tr)({width:e.counts[(0,w.R1)(nr)[t]]/e.total*100+"%"}),title:`${t}: ${e.counts[(0,w.R1)(nr)[t]]}`},null,14,si))),128))],8,li)]))),128))])]),(0,s.Lk)("div",ni,[t[3]||(t[3]=(0,s.Lk)("h3",null,"スコアレート分布",-1)),l.value.length?((0,s.uX)(),(0,s.CE)("div",oi,[(0,s.Lk)("div",ri,[t[2]||(t[2]=(0,s.Lk)("span",null,"Level",-1)),(0,s.Lk)("div",{class:"rate-boundary-labels",style:(0,n.Tr)({"--bins":(0,w.R1)(cr)})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,w.R1)(br),(e,t)=>((0,s.uX)(),(0,s.CE)("span",{key:e.label,class:(0,n.C4)(["rate-boundary-label",{"is-first":0===t,"is-last":t===(0,w.R1)(br).length-1}]),style:(0,n.Tr)({left:e.left})},(0,n.v_)(e.label),7))),128))],4)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.level,class:"rate-row"},[(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",ii,[(0,s.eW)((0,n.v_)(e.level),1)])),[[u,{content:`スコア頑張り度 合計 ${(0,w.R1)(fr)(o.value[e.level]||0)} / 平均 ${(0,w.R1)(fr)((o.value[e.level]||0)/Math.max(1,r.value[e.level]||0))}`,delay:{show:0,hide:0}}]]),(0,s.Lk)("div",{class:"rate-heat",role:"img","aria-label":`スコアレート分布 ${e.level}`,style:(0,n.Tr)({"--bins":(0,w.R1)(cr)})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.segments,(e,t)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("span",{key:t,class:(0,n.C4)(["rate-bin",[e.rank?`bg-${e.rank}`:"",0===e.count?"is-empty":""]]),style:(0,n.Tr)({"--alpha":e.alpha.toFixed(3),"--span":e.len})},null,6)),[[u,0===e.count?void 0:{content:`${e.startPercent.toFixed(1)}% (${e.rank}): ${e.count}`,delay:{show:0,hide:0}}]])),128))],12,ci)]))),128))])):((0,s.uX)(),(0,s.CE)("div",ui,"スコアレートの対象データがありません"))])])}}});const _i=(0,X.A)(di,[["__scopeId","data-v-6a958ce9"]]);var vi=_i;const pi={class:"panel-box pickup-panel"},hi={class:"panel-header"},bi={key:0,class:"top-updates"},ki={class:"update-level"},mi={class:"update-title"},fi={class:"update-meta"},yi={class:"update-date"},gi={key:1,class:"empty-state"};var Li=(0,s.pM)({__name:"DifficultyTableUserPickup",props:{tableSongs:{}},setup(e){const t=e,a=(0,s.EW)(()=>Mr(t.tableSongs,lr));return(e,t)=>{const l=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("section",pi,[(0,s.Lk)("div",hi,[(0,s.bo)(((0,s.uX)(),(0,s.CE)("h3",null,[...t[0]||(t[0]=[(0,s.eW)("ランプ更新ピックアップ",-1)])])),[[l,{content:"30日以内の更新",delay:{show:0,hide:0}}]])]),a.value.length?((0,s.uX)(),(0,s.CE)("div",bi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.title,class:"update-row"},[(0,s.Lk)("div",ki,(0,n.v_)(e.level),1),(0,s.Lk)("div",mi,(0,n.v_)(e.title),1),(0,s.Lk)("div",fi,[(0,s.Lk)("span",{class:(0,n.C4)(["lamp-pill",`lamp-${e.lamp}`])},(0,n.v_)(e.lamp),3),(0,s.Lk)("span",yi,(0,n.v_)(e.updatedLabel),1)])]))),128))])):((0,s.uX)(),(0,s.CE)("div",gi,"最近の更新はありません"))])}}});const wi=(0,X.A)(Li,[["__scopeId","data-v-7b14918f"]]);var Ei=wi;const Ci={class:"panel-box"},Ai={class:"panel-header"},Wi={class:"filters"},xi=["value"],Ri=["value"],Mi={class:"table-meta"},Xi={key:0,class:"pager"},Fi=["disabled"],Ti={class:"pager-text"},Di=["disabled"],Ii={class:"table-responsive"},Ki={class:"table table-sm align-middle"},Pi={key:0,class:"empty-state"};var Si=(0,s.pM)({__name:"DifficultyTableUserSongList",props:{tableSongs:{},searchText:{},lampFilter:{},showAllRows:{type:Boolean},rowsPerPage:{},currentPage:{}},emits:["update:searchText","update:lampFilter","update:showAllRows","update:currentPage"],setup(e,{emit:t}){const a=e,l=t,o=()=>{l("update:showAllRows",!a.showAllRows)},r=(0,s.EW)(()=>Er(a.tableSongs,a.searchText,a.lampFilter,tr,ar)),i=(0,s.EW)(()=>Xr(r.value)),c=(0,s.EW)(()=>i.value.length),u=(0,s.EW)(()=>Math.max(1,Math.ceil(c.value/a.rowsPerPage))),d=(0,s.EW)(()=>{if(a.showAllRows)return i.value;const e=(a.currentPage-1)*a.rowsPerPage;return i.value.slice(e,e+a.rowsPerPage)});(0,s.wB)([u,()=>a.showAllRows,()=>a.currentPage],([e,t,a])=>{t||(a>e&&l("update:currentPage",e),a<1&&l("update:currentPage",1))});const _=()=>{l("update:currentPage",Math.max(1,a.currentPage-1))},v=()=>{l("update:currentPage",Math.min(u.value,a.currentPage+1))};return(t,a)=>{const r=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("section",Ci,[(0,s.Lk)("div",Ai,[a[3]||(a[3]=(0,s.Lk)("h3",null,"曲一覧",-1)),(0,s.Lk)("div",Wi,[(0,s.Lk)("input",{class:"form-control form-control-sm",type:"text",placeholder:"曲名検索",value:e.searchText,onInput:a[0]||(a[0]=e=>l("update:searchText",e.target.value))},null,40,xi),(0,s.Lk)("select",{class:"form-control form-control-sm",value:e.lampFilter,onChange:a[1]||(a[1]=e=>l("update:lampFilter",e.target.value))},[...a[2]||(a[2]=[(0,s.Lk)("option",{value:"all"},"ランプ全て",-1),(0,s.Lk)("option",{value:"hard"},"Hard以上",-1),(0,s.Lk)("option",{value:"uncleared"},"未達成",-1)])],40,Ri),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:o},(0,n.v_)(e.showAllRows?"自動ページング":"すべて表示"),1)])]),(0,s.Lk)("div",Mi,[(0,s.Lk)("span",null,"表示 "+(0,n.v_)(e.showAllRows?c.value:d.value.length)+" / "+(0,n.v_)(c.value),1),e.showAllRows?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Xi,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-secondary",disabled:1===e.currentPage,onClick:_}," 前へ ",8,Fi),(0,s.Lk)("span",Ti,(0,n.v_)(e.currentPage)+" / "+(0,n.v_)(u.value),1),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-secondary",disabled:e.currentPage===u.value,onClick:v}," 次へ ",8,Di)]))]),(0,s.Lk)("div",Ii,[(0,s.Lk)("table",Ki,[a[4]||(a[4]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Level"),(0,s.Lk)("th",null,"Title"),(0,s.Lk)("th",null,"Lamp"),(0,s.Lk)("th",null,"Rate"),(0,s.Lk)("th",null,"Miss"),(0,s.Lk)("th",null,"Last")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.title},[(0,s.Lk)("td",null,(0,n.v_)(e.level),1),(0,s.bo)(((0,s.uX)(),(0,s.CE)("td",null,[(0,s.eW)((0,n.v_)(e.title),1)])),[[r,{content:e.titleWrapped,delay:{show:100,hide:0},popperClass:"song-title-tooltip"}]]),(0,s.Lk)("td",null,[(0,s.Lk)("span",{class:(0,n.C4)(["lamp-pill",`lamp-${e.lamp}`])},(0,n.v_)(e.lamp),3)]),(0,s.Lk)("td",null,(0,n.v_)(e.rate),1),(0,s.Lk)("td",null,(0,n.v_)(e.miss),1),(0,s.Lk)("td",null,(0,n.v_)(e.last),1)]))),128))])])]),i.value.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Pi,"該当データがありません"))])}}});const Ni=(0,X.A)(Si,[["__scopeId","data-v-33384113"]]);var Oi=Ni;const $i={id:"table-user-page",class:"container"},Hi={class:"summary-grid"},ji={class:"summary-label"},Bi={class:"summary-value"},qi=100;var Ui=(0,s.pM)({__name:"DifficultyTableUser",setup(e){const t=L(),a=(0,E.lq)(),l=(0,E.rd)(),o=(0,w.KR)(v["default"]()),r=(0,w.KR)(null),i=(0,w.KR)(null),c=(0,w.KR)(0),u=(0,w.KR)(""),d=(0,w.KR)("all"),_=(0,w.KR)(!1),p=(0,w.KR)(!1),h=(0,w.KR)(""),b=(0,w.KR)("warning"),k=(0,w.KR)(1),m=(0,w.KR)(50),f=(0,w.KR)(!1);let y=null;const C=(0,w.KR)($r()),A=(0,s.EW)(()=>Sr(a,t.userInfo?.user_id||0)),W=(0,s.EW)(()=>!!t.accessToken&&A.value>0),x=(0,s.EW)(()=>o.value.name_list()),R=(0,s.EW)(()=>x.value.map(e=>({name:e,id:o.value.get_id_by_name(e)}))),M=(0,s.EW)(()=>o.value.tables.find(e=>e.id===c.value)||o.value.first()),X=(0,s.EW)(()=>M.value?.name||"未選択"),F=(0,s.EW)(()=>i.value?.name||""),T=(0,s.EW)(()=>wr(i.value,r.value,M.value)),D=(0,s.EW)(()=>Cr(T.value)),I=()=>{m.value=Hr(window.innerHeight,{base:420,rowHeight:36,minRows:20,maxRows:qi}),k.value=Math.max(1,k.value)},K=(0,s.EW)(()=>Dr(T.value)),P=(e,t="warning",a)=>{h.value=e,b.value=t,y&&(window.clearTimeout(y),y=null),a&&(y=window.setTimeout(()=>{h.value="",y=null},a))},S=async()=>{if(t.accessToken){_.value=!0;try{o.value=await g.fetch_tables(t.accessToken),r.value=await g.fetch_songs(t.accessToken);const e=Nr(a),l=o.value.first();e&&o.value.tables.some(t=>t.id===e)?c.value=e:l&&(c.value=l.id)}finally{_.value=!1}}else P("ログインしてください")},N=async()=>{if(W.value){p.value=!0,P("読込中...");try{i.value=await g.fetch_score(new Date(0),C.value,A.value,t.accessToken),P(i.value?"":"読み込みに失敗しました")}finally{p.value=!1}}else P("ログインしてユーザーを指定してください")},O=(0,s.EW)(()=>_.value||p.value),$=async()=>{if(A.value<=0)return void P("ユーザーを指定してください");const e=Or(l,{userId:A.value,tableId:c.value},window.location.origin),t=await Kr(e);t?P("共有リンクをコピーしました","success",3e3):P("共有リンクのコピーに失敗しました")},H=async()=>{const e=Object.assign({},a.query);e.table_id=""+c.value,await l.replace({query:e})};return(0,s.sV)(async()=>{await S(),await N(),I(),window.addEventListener("resize",I)}),(0,s.xo)(()=>{window.removeEventListener("resize",I),y&&(window.clearTimeout(y),y=null)}),(0,s.wB)(()=>A.value,async()=>{await N()}),(0,s.wB)([u,d,c],()=>{k.value=1}),(e,t)=>{const a=(0,s.gN)("tooltip");return(0,s.uX)(),(0,s.CE)("section",$i,[(0,s.bF)(zr,{selectedTableId:c.value,"onUpdate:selectedTableId":t[0]||(t[0]=e=>c.value=e),selectedTableName:X.value,userName:F.value,userId:A.value,lastUpdated:K.value,tableOptions:R.value,isLoading:O.value,onChangeTable:H,onShareLink:$},null,8,["selectedTableId","selectedTableName","userName","userId","lastUpdated","tableOptions","isLoading"]),h.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["alert","success"===b.value?"alert-success":"alert-warning"]),role:"alert"},(0,n.v_)(h.value),3)):(0,s.Q3)("",!0),(0,s.Lk)("section",Hi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(D.value,e=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{key:e.label,class:"summary-card"},[(0,s.Lk)("div",ji,(0,n.v_)(e.label),1),(0,s.Lk)("div",Bi,(0,n.v_)(e.value),1)])),[[a,e.tooltip?{content:e.tooltip,delay:{show:0,hide:0}}:void 0]])),128))]),(0,s.bF)(vi,{tableSongs:T.value,baseLevels:M.value?.level_list||[]},null,8,["tableSongs","baseLevels"]),(0,s.bF)(Ei,{tableSongs:T.value},null,8,["tableSongs"]),(0,s.bF)(Oi,{searchText:u.value,"onUpdate:searchText":t[1]||(t[1]=e=>u.value=e),lampFilter:d.value,"onUpdate:lampFilter":t[2]||(t[2]=e=>d.value=e),showAllRows:f.value,"onUpdate:showAllRows":t[3]||(t[3]=e=>f.value=e),currentPage:k.value,"onUpdate:currentPage":t[4]||(t[4]=e=>k.value=e),tableSongs:T.value,rowsPerPage:m.value},null,8,["searchText","lampFilter","showAllRows","currentPage","tableSongs","rowsPerPage"])])}}});const Yi=(0,X.A)(Ui,[["__scopeId","data-v-bcf671de"]]);var Vi=Yi;const Qi=[{path:"/",component:async()=>Zo},{path:"/view",component:bo,props:e=>({user_id:parseInt(e.query.user_id||0),rival_id:parseInt(e.query.rival_id||0),mode:"detail"})},{path:"/view/:mode",component:bo,props:e=>({user_id:parseInt(e.query.user_id||0),rival_id:parseInt(e.query.rival_id||0),mode:e.params.mode})},{path:"/mypage",component:pe},{path:"/stats",component:dl},{path:"/table",component:Wl,props:e=>({user_id:parseInt(e.query.user_id)})},{path:"/table-user",component:Vi},{path:"/table-user/:user_id",component:Vi},{path:"/song",component:Mo,props:e=>({sha256:e.query.sha256})}],Gi=(0,E.aE)({history:(0,E.Bt)(),routes:Qi});var Ji=a(4139),zi=a(8950),Zi=(a(1784),a(2353)),ec=a(4996),tc=a(292),ac=a(4191),lc=a(985);const sc=(0,l.Ef)(O);sc.use(Gi);const nc=(0,o.Ey)();nc.use(Ji.A),sc.use(nc),zi.$W.autoAddCss=!1,zi.Yv.add(Zi.v02,Zi.kwR,Zi.cNj,Zi.br3,Zi.Wcv,Zi.h6r,Zi.N72,Zi.GxD,Zi.rhE,Zi.jPR,Zi.wRm,Zi.U23,Zi.VNe,Zi.gdJ,Zi.APi,Zi.INu,Zi.QLR,Zi.M9Z,Zi.Nfw,Zi.Jyw,Zi.lEd,Zi.rC2,Zi.$Fj,Zi.w97),zi.Yv.add(ec.eMj),sc.component("font-awesome-icon",tc.gc),zi.tT.watch(),sc.component("DatePicker",ac.A),lc.Ay.options.themes.tooltip.triggers=["hover","focus","click"],sc.use(lc.Ay);const oc=u.levels.SILENT;u.setLevel(oc,!1),a(8517),a(8515),a(6762),sc.mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,n){if(!l){var o=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],n=e[u][2];for(var r=!0,i=0;i<l.length;i++)(!1&n||o>=n)&&Object.keys(a.O).every(function(e){return a.O[e](l[i])})?l.splice(i--,1):(r=!1,n<o&&(o=n));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[l,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,n,o=l[0],r=l[1],i=l[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(i)var u=i(a)}for(t&&t(l);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},l=self["webpackChunkbeatoraja_play_recommend_web"]=self["webpackChunkbeatoraja_play_recommend_web"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],function(){return a(7093)});l=a.O(l)})();
//# sourceMappingURL=app.f3789185.js.map